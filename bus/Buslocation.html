<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>バス路線案内</title>
<style>
  body {
    background-color: #e6f5e6;
    font-family: 'Arial', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    transition: all 0.6s ease;
  }

  .container {
    text-align: center;
    transition: all 0.6s ease;
  }

  .moved {
    position: fixed;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
  }

  select, button {
    padding: 10px 14px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #88bb88;
    background-color: #f9fff9;
    margin: 5px;
    transition: all 0.3s ease;
  }

  select:focus, button:hover {
    background-color: #d0f0d0;
  }

  button {
    background-color: #c8eac8;
    cursor: pointer;
  }

  iframe {
    width: 100%;
    height: calc(100vh - 120px);
    border: none;
    margin-top: 80px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: all 0.6s ease;
  }
</style>
</head>
<body>
  <div class="container" id="container">
    <select id="stopSelect">
      <option value="">バス停を選択</option>
      <option value="今出在家">今出在家</option>
      <option value="夢野町3丁目">夢野町3丁目</option>
    </select>

    <select id="directionSelect">
      <option value="">方面を選択</option>
    </select>

    <select id="routeSelect">
      <option value="">系統を選択</option>
    </select>

    <button id="showButton">表示</button>
  </div>

  <iframe id="busFrame"></iframe>

<script>
const data = {
  '今出在家': {
    '新開地方面': {
      '3系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0004',
      '9系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0151'
    },
    '吉田町方面': {
      '3系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0003',
      '9系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0150'
    }
  },
  '夢野町3丁目': {
    '長田・板宿方面': {
      '3系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0004',
      '11系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0015',
      '40系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0053',
      '65系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0081',
      '110系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0122',
      '112系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0126'
    },
    '神戸駅方面': {
      '3系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0003',
      '11系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0016',
      '40系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0053',
      '65系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0082',
      '110系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0123',
      '112系統': 'https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0127'
    }
  }
};

const stopSelect = document.getElementById('stopSelect');
const directionSelect = document.getElementById('directionSelect');
const routeSelect = document.getElementById('routeSelect');
const showButton = document.getElementById('showButton');
const container = document.getElementById('container');
const frame = document.getElementById('busFrame');

stopSelect.addEventListener('change', () => {
  directionSelect.innerHTML = '<option value="">方面を選択</option>';
  routeSelect.innerHTML = '<option value="">系統を選択</option>';
  const stop = stopSelect.value;
  if (stop && data[stop]) {
    Object.keys(data[stop]).forEach(direction => {
      const opt = document.createElement('option');
      opt.value = direction;
      opt.textContent = direction;
      directionSelect.appendChild(opt);
    });
  }
});

directionSelect.addEventListener('change', () => {
  routeSelect.innerHTML = '<option value="">系統を選択</option>';
  const stop = stopSelect.value;
  const direction = directionSelect.value;
  if (stop && direction && data[stop][direction]) {
    Object.keys(data[stop][direction]).forEach(route => {
      const opt = document.createElement('option');
      opt.value = route;
      opt.textContent = route;
      routeSelect.appendChild(opt);
    });
  }
});

showButton.addEventListener('click', () => {
  const stop = stopSelect.value;
  const direction = directionSelect.value;
  const route = routeSelect.value;

  if (!stop || !direction || !route) {
    alert('すべての項目を選択してください');
    return;
  }

  const url = data[stop][direction][route];
  if (url) {
    container.classList.add('moved');
    document.body.style.justifyContent = 'flex-start';
    frame.src = url;
  }
});
</script>
</body>
</html>
