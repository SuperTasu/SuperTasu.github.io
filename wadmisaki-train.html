<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>電光掲示板 - 和田岬</title>
  <style>
    body { background-color: white; color: #0056b3; font-family: 'Arial', sans-serif; text-align: center; margin: 0; padding: 20px; }
    h1 { margin: 0; font-size: 32px; }
    #clock { font-size: 24px; margin-bottom: 20px; }
    .row { display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; }
    .direction { border: 3px solid #87CEFA; background-color: white; padding: 20px; border-radius: 10px; width: 450px; box-sizing: border-box; text-align: left; }
    .title { font-size: 20px; font-weight: bold; margin-bottom: 15px; }
    .entry { font-size: clamp(14px, 1.8vw, 18px); margin: 10px 0; overflow-wrap: break-word; white-space: normal; }
  </style>
</head>
<body>
  <h1>K06 和田岬</h1>
  <div id="clock">--:--:--</div>
  <div class="row">
    <div class="direction">
      <div class="title">三宮・花時計前方面行</div>
      <div id="sannomiya"></div>
    </div>
    <div class="direction">
      <div class="title">新長田方面行</div>
      <div id="shinNagata"></div>
    </div>
  </div>
  <script>
    function isHoliday(date) { return date.getDay() === 0 || date.getDay() === 6; }
    const sannomiyaWeekday={5:[41,57],6:[16,27,46,49],7:[3,11,19,28,38,44,50,56],8:[2,8,14,20,26,32,38,44,50,58],9:[6,16,26,36,46,56],10:[6,16,26,36,46,56],11:[6,16,26,36,46,56],12:[6,16,26,36,46,56],13:[6,16,26,36,46,56],14:[6,16,26,36,46,56],15:[6,16,26,36,46,56],16:[6,16,26,36,46,56],17:[6,13,21,29,36,43,51,58],18:[6,13,21,28,36,43,51,58],19:[6,16,26,36,46,56],20:[6,16,26,36,46,56],21:[6,16,26,36,47,59],22:[11,23,35,51],23:[5,21,36,52]};
    const sannomiyaHoliday={5:[41,57],6:[15,26,41,51],7:[1,11,21,31,41,47,51],8:[1,8,16,23,31,38,46,56],9:[6,16,26,36,46,56],10:[6,16,26,36,46,56],11:[6,16,26,36,46,56],12:[6,16,26,36,46,56],13:[6,16,26,36,46,56],14:[6,16,26,36,46,56],15:[6,16,26,36,46,56],16:[6,16,26,36,46,56],17:[6,16,26,36,46,56],18:[6,16,26,36,46,56],19:[6,16,26,36,46,56],20:[6,16,26,36,46,56],21:[6,16,26,36,47,59],22:[11,23,35,51],23:[5,21,36,52]};
    const shinNagataWeekday={5:[51],6:[6,21,36,47,58],7:[9,16,22,29,35,41,47,53,59],8:[5,11,17,23,29,35,41,47,54],9:[0,9,13,18,28,38,48,58],10:[8,18,28,38,48,58],11:[8,18,28,38,48,58],12:[8,18,28,38,48,58],13:[8,18,28,38,48,58],14:[8,18,28,38,48,58],15:[8,18,28,38,48,58],16:[8,18,28,38,48,58],17:[8,18,27,34,42,49,57],18:[4,12,19,27,34,42,49,57],19:[4,12,19,28,38,48,58],20:[8,18,28,38,48,58],21:[8,18,28,38,50],22:[1,13,25,37,48],23:[0,13,28,44,59]};
    const shinNagataHoliday={5:[51],6:[6,21,37,51],7:[3,13,23,33,43,52],8:[1,7,14,22,29,37,44,52,59],9:[8,18,28,38,48,58],10:[8,18,28,38,48,58],11:[8,18,28,38,48,58],12:[8,18,28,38,48,58],13:[8,18,28,38,48,58],14:[8,18,28,38,48,58],15:[8,18,28,38,48,58],16:[8,18,28,38,48,58],17:[8,18,28,38,48,58],18:[8,18,28,38,48,58],19:[8,18,28,38,48,58],20:[8,18,28,38,48,58],21:[8,18,28,38,50],22:[1,13,25,37,48],23:[0,13,28,44,59]};
    function getUpcomingTimes(timetable){const now=new Date,h=now.getHours(),m=now.getMinutes();let results=[];for(let hour=h;hour<=23;hour++)if(timetable[hour])for(let min of timetable[hour]){if(hour===h&&min<m)continue;const dep=new Date;dep.setHours(hour,min,0,0);const diff=Math.floor((dep-now)/1e3);if(diff>=0){if(results.push({hour:hour,minute:min.toString().padStart(2,"0"),remaining:diff}),results.length>=2)return results}}return results}
    function formatMMSS(seconds){const m=Math.floor(seconds/60).toString().padStart(2,"0"),s=(seconds%60).toString().padStart(2,"0");return`${m}:${s}`}
    function updateDisplay(){const now=new Date;document.getElementById("clock").textContent=now.toLocaleTimeString("ja-JP",{hour12:!1});const isHolidayToday=isHoliday(now),sannomiya=isHolidayToday?sannomiyaHoliday:sannomiyaWeekday,shinNagata=isHolidayToday?shinNagataHoliday:shinNagataWeekday,upcomingSannomiya=getUpcomingTimes(sannomiya),upcomingNagata=getUpcomingTimes(shinNagata);document.getElementById("sannomiya").innerHTML=upcomingSannomiya.map((train,index)=>`<div class="entry">${index===0?"先発":"次発"}　${train.hour}:${train.minute}　三宮・花時計前方面行　残り${formatMMSS(train.remaining)}</div>`).join(""),document.getElementById("shinNagata").innerHTML=upcomingNagata.map((train,index)=>`<div class="entry">${index===0?"先発":"次発"}　${train.hour}:${train.minute}　新長田方面行　残り${formatMMSS(train.remaining)}</div>`).join("")}
    setInterval(updateDisplay,1e3),updateDisplay();
  </script>
</body>
</html>
