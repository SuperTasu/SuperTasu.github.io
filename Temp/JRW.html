<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JR神戸線 遅延・運行情報</title>
</head>
<body>
    <h1>JR神戸線（JR西日本） 運行情報</h1>
    <button id="refresh">更新</button>
    <div id="status">読み込み中…</div>

    <script>
        async function getStatus() {
            try {
                // JR西日本運行情報（近畿エリア）
                const response = await fetch("https://trafficinfo.westjr.co.jp/kinki.html");
                const text = await response.text();

                // 得られた HTML をパース
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, "text/html");

                // 遅延情報部分（例: li要素内のテキスト）
                const items = Array.from(doc.querySelectorAll("#contents .status li"));
                const info = items.map(li => li.textContent.trim()).join("<br>");

                document.getElementById("status").innerHTML = info || "運行状況が取得できませんでした";
            } catch (error) {
                document.getElementById("status").innerHTML = "取得エラー: " + error;
            }
        }

        document.getElementById("refresh").addEventListener("click", getStatus);

        getStatus(); // 初回読み込み
    </script>
</body>
</html>
