<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¥æˆ¸å¸‚ãƒã‚¹ ç³»çµ±è¡¨ç¤º</title>
<style>
  body {
    background-color: #e6f5e6;
    font-family: "Hiragino Kaku Gothic ProN", sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .selector-container {
    background: #ffffffd5;
    padding: 15px;
    border-radius: 0 0 16px 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
  }

  .selectors-row {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }

  select, button {
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid #8bc48b;
    font-size: 16px;
    width: 180px;
  }

  button {
    background-color: #8bc48b;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
  }

  button:hover {
    background-color: #6ba86b;
  }

  .info {
    font-size: 18px;
    font-weight: bold;
    color: #2e5c2e;
    margin: 10px 0;
  }

  iframe {
    flex: 1;
    width: 100%;
    border: none;
  }

  @media (max-width: 600px) {
    .selectors-row {
      flex-direction: column;
      align-items: center;
    }

    select, button {
      width: 90%;
      font-size: 15px;
    }

    .info {
      font-size: 16px;
    }
  }
</style>
</head>
<body>

<div class="selector-container">
  <div class="selectors-row">
    <select id="busStop">
      <option value="">ãƒã‚¹åœ</option>
      <option value="ä»Šå‡ºåœ¨å®¶">ä»Šå‡ºåœ¨å®¶</option>
      <option value="å¤¢é‡ç”º3ä¸ç›®">å¤¢é‡ç”º3ä¸ç›®</option>
      <option value="å®®å·ç”º9ä¸ç›®">å®®å·ç”º9ä¸ç›®</option>
    </select>

    <select id="direction">
      <option value="">æ–¹é¢</option>
    </select>

    <select id="line">
      <option value="">ç³»çµ±</option>
    </select>

    <button id="showBtn">è¡¨ç¤º</button>
  </div>

  <div id="info" class="info"></div>
</div>

<iframe id="resultFrame"></iframe>

<script>
const data = {
  "ä»Šå‡ºåœ¨å®¶": {
    "æ–°é–‹åœ°æ–¹é¢": {
      "3ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0004",
      "9ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0151"
    },
    "å‰ç”°ç”ºæ–¹é¢": {
      "3ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0003",
      "9ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0341&directionId=kobe0150"
    }
  },
  "å¤¢é‡ç”º3ä¸ç›®": {
    "é•·ç”°ãƒ»æ¿å®¿æ–¹é¢": {
      "3ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0004",
      "11ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0015",
      "40ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0053",
      "65ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0081",
      "110ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0122",
      "112ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0126"
    },
    "ç¥æˆ¸é§…æ–¹é¢": {
      "3ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0003",
      "11ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0016",
      "65ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0082",
      "110ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0123",
      "112ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0325&directionId=kobe0127"
    }
  },
  "å®®å·ç”º9ä¸ç›®": {
    "æ¿å®¿ãƒ»JRé·¹å–é§…æ–¹é¢": {
      "11ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0015",
      "13ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0017",
      "110ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0122",
      "112ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0126"
    },
    "é•·ç”°ãƒ»ç¥æˆ¸é§…æ–¹é¢": {
      "11ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0015",
      "13ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0017",
      "110ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0123",
      "112ç³»çµ±": "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0412&directionId=kobe0127"
    }
  }
};

const busStopSelect = document.getElementById("busStop");
const directionSelect = document.getElementById("direction");
const lineSelect = document.getElementById("line");
const showBtn = document.getElementById("showBtn");
const frame = document.getElementById("resultFrame");
const info = document.getElementById("info");

window.addEventListener("load", () => {
  const saved = JSON.parse(localStorage.getItem("busSelection"));
  if (saved) {
    busStopSelect.value = saved.busStop;
    updateDirections();
    directionSelect.value = saved.direction;
    updateLines();
    lineSelect.value = saved.line;
    if (saved.url) {
      info.textContent = `ğŸšŒ ${saved.busStop} â€“ ${saved.direction} â€“ ${saved.line}`;
      frame.src = saved.url;
    }
  }
});

function updateDirections() {
  directionSelect.innerHTML = '<option value="">æ–¹é¢</option>';
  lineSelect.innerHTML = '<option value="">ç³»çµ±</option>';
  const busStop = busStopSelect.value;
  if (busStop && data[busStop]) {
    Object.keys(data[busStop]).forEach(dir => {
      const opt = document.createElement("option");
      opt.value = dir;
      opt.textContent = dir;
      directionSelect.appendChild(opt);
    });
  }
}

function updateLines() {
  lineSelect.innerHTML = '<option value="">ç³»çµ±</option>';
  const busStop = busStopSelect.value;
  const direction = directionSelect.value;
  if (busStop && direction && data[busStop][direction]) {
    Object.keys(data[busStop][direction]).forEach(line => {
      const opt = document.createElement("option");
      opt.value = line;
      opt.textContent = line;
      lineSelect.appendChild(opt);
    });
  }
}

busStopSelect.addEventListener("change", updateDirections);
directionSelect.addEventListener("change", updateLines);

showBtn.addEventListener("click", () => {
  const busStop = busStopSelect.value;
  const direction = directionSelect.value;
  const line = lineSelect.value;
  if (busStop && direction && line) {
    const url = data[busStop][direction][line];
    info.textContent = `ğŸšŒ ${busStop} â€“ ${direction} â€“ ${line}`;
    frame.src = url;
    localStorage.setItem("busSelection", JSON.stringify({ busStop, direction, line, url }));
  } else {
    alert("ãƒã‚¹åœãƒ»æ–¹é¢ãƒ»ç³»çµ±ã‚’ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");
  }
});
</script>

</body>
</html>
