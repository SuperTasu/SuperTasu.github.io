<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Spotify „É™„É≥„ÇØÈõÜ</title>
<style>
  body {
    font-family: sans-serif;
    margin: 30px;
    background: #f8f8f8;
    text-align: center;
  }

  #container {
    max-width: 1000px;
    margin: auto;
  }

  #playerList {
    display: flex;
    overflow-x: auto;
    gap: 20px;
    padding: 20px;
    scroll-snap-type: x mandatory;
  }

  .player {
    background: #fff;
    border-radius: 12px;
    flex: 0 0 90%;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    position: relative;
    scroll-snap-align: center;
  }

  iframe {
    width: 100%;
    height: 152px;
    border-radius: 12px;
  }

  .actions {
    position: absolute;
    top: 5px;
    right: 10px;
  }

  button {
    background: #1db954;
    border: none;
    color: white;
    border-radius: 8px;
    padding: 8px 14px;
    cursor: pointer;
    font-size: 14px;
  }

  button:hover {
    background: #17a44b;
  }

  .edit-btn, .delete-btn {
    background: #ccc;
    color: black;
    margin-left: 5px;
  }

  #addForm {
    display: none;
    margin-top: 10px;
  }

  input {
    width: 70%;
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  #addBtn {
    margin-top: 10px;
  }

  /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº„Çí„Çπ„Çø„Ç§„É™„ÉÉ„Ç∑„É•„Å´ */
  #playerList::-webkit-scrollbar {
    height: 8px;
  }
  #playerList::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 4px;
  }
</style>
</head>
<body>
  <div id="container">
    <button id="addBtn">Ôºã</button>

    <div id="addForm">
      <input type="text" id="spotifyUrl" placeholder="Spotify„ÅÆURL„ÇíÂÖ•Âäõ">
      <button id="saveBtn">‰øùÂ≠ò</button>
    </div>

    <div id="playerList"></div>
  </div>

  <script>
    const addBtn = document.getElementById("addBtn");
    const addForm = document.getElementById("addForm");
    const saveBtn = document.getElementById("saveBtn");
    const urlInput = document.getElementById("spotifyUrl");
    const playerList = document.getElementById("playerList");

    let editIndex = null;

    function loadPlayers() {
      const data = JSON.parse(localStorage.getItem("spotifyPlayers") || "[]");
      playerList.innerHTML = "";
      data.forEach((url, index) => {
        const embedUrl = url.replace("open.spotify.com/", "open.spotify.com/embed/");
        const div = document.createElement("div");
        div.className = "player";
        div.innerHTML = `
          <iframe src="${embedUrl}?utm_source=generator"
            frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy"></iframe>
          <div class="actions">
            <button class="edit-btn" onclick="editPlayer(${index})">‚úèÔ∏è</button>
            <button class="delete-btn" onclick="deletePlayer(${index})">üóëÔ∏è</button>
          </div>
        `;
        playerList.appendChild(div);
      });
    }

    function savePlayer() {
      const url = urlInput.value.trim();
      if (!url.includes("open.spotify.com")) {
        alert("Spotify„ÅÆURL„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ");
        return;
      }

      const data = JSON.parse(localStorage.getItem("spotifyPlayers") || "[]");
      if (editIndex !== null) {
        data[editIndex] = url;
        editIndex = null;
      } else {
        data.push(url);
      }

      localStorage.setItem("spotifyPlayers", JSON.stringify(data));
      urlInput.value = "";
      addForm.style.display = "none";
      loadPlayers();
    }

    function editPlayer(index) {
      const data = JSON.parse(localStorage.getItem("spotifyPlayers") || "[]");
      urlInput.value = data[index];
      addForm.style.display = "block";
      editIndex = index;
    }

    function deletePlayer(index) {
      const data = JSON.parse(localStorage.getItem("spotifyPlayers") || "[]");
      data.splice(index, 1);
      localStorage.setItem("spotifyPlayers", JSON.stringify(data));
      loadPlayers();
    }

    addBtn.onclick = () => {
      addForm.style.display = addForm.style.display === "none" ? "block" : "none";
      urlInput.value = "";
      editIndex = null;
    };

    saveBtn.onclick = savePlayer;

    window.onload = loadPlayers;
  </script>
</body>
</html>
