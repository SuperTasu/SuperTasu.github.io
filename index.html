<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Link First</title>
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" sizes="180x180">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- アイコンフォント -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" />
   
  <style>
    /* --- 基本設定 --- */
    body {
        margin: 0;
        font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
        background-color: #f4f6f8;
        color: #333;
        transition: background-color 0.3s, color 0.3s;
    }
    a { text-decoration: none; color: inherit; }
    .hidden { display: none !important; }
    .label-text { font-weight: 700 !important; font-size: 0.85rem; margin-top: 5px; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 100%; text-align: center; }

    /* --- ヘッダーエリア --- */
    .header-area {
        background: #fff;
        padding: 10px 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        margin-bottom: 20px;
        transition: background 0.3s;
    }
    .clock-main-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
    }
    .clock-content-wrapper .datetime-row {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 0.9rem;
        flex-wrap: wrap;
    }
    #clock { font-weight: bold; font-size: 1.1rem; }
    #countdown { color: #555; font-size: 0.85rem; }
    .theme-switcher { display: flex; gap: 5px; cursor: pointer; }
    .theme-dot { width: 15px; height: 15px; border-radius: 50%; border: 1px solid #ccc; }
    .theme-dot.light { background: #fff; }
    .theme-dot.dark { background: #333; }
    
    .header-speed-test iframe {
        width: 80px; height: 30px; border: none; overflow: hidden; vertical-align: middle;
    }

    /* --- 検索バー --- */
    .search-wrapper {
        display: flex;
        justify-content: center;
        padding: 0 15px;
        margin-bottom: 10px;
        width: 100%;
        box-sizing: border-box;
    }
    .search-container {
        position: relative;
        display: flex;
        align-items: center;
        background: #fff;
        border-radius: 20px;
        padding: 5px 15px;
        border: 1px solid #ddd;
        width: 100%;
        max-width: 600px; 
        transition: background 0.3s, border-color 0.3s;
        height: 45px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .search-container i.fa-search { color: #888; margin-right: 10px; }
    #appSearchInput {
        border: none;
        outline: none;
        width: 100%;
        font-size: 16px;
        background: transparent;
        color: #333;
    }
    #clearSearchBtn {
        color: #999;
        cursor: pointer;
        padding: 5px;
    }
    #clearSearchBtn:hover { color: #333; }

    /* --- タブメニュー --- */
    .tab-menu {
        display: flex;
        justify-content: center;
        gap: 10px;
        padding: 0 10px 20px 10px;
        flex-wrap: wrap;
    }
    .tab-item {
        padding: 10px 25px;
        cursor: pointer;
        border-radius: 25px;
        transition: all 0.2s ease;
        background: #fff;
        border: 1px solid #e0e0e0;
        font-weight: bold;
        color: #555;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .tab-item:hover {
        background-color: #f0f0f0;
        transform: translateY(-2px);
    }
    /* アクティブなタブのスタイル */
    .tab-item.active {
        background-color: #007bff;
        color: white;
        border-color: #007bff;
        box-shadow: 0 4px 6px rgba(0, 123, 255, 0.3);
    }
    .tab-item.active i {
        color: white !important;
    }
    .fa-star.fy-icon { color: #ffc107; }

    /* --- コンテンツエリア共通 --- */
    .section-title {
        text-align: center;
        margin: 20px 0 15px;
        font-size: 1.1rem;
        color: #666;
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
        width: 90%;
        margin-left: auto;
        margin-right: auto;
    }

    /* --- グリッドレイアウト (Apps / FY) --- */
    .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
        gap: 15px;
        padding: 10px 20px;
        max-width: 1000px;
        margin: 0 auto;
    }
    .icon-item {
        background: #fff;
        border-radius: 12px;
        padding: 15px 5px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative; /* お気に入りボタン配置用 */
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: transform 0.2s, box-shadow 0.2s;
        height: 100px;
    }
    .icon-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }
    .icon-img-wrapper img {
        width: 48px;
        height: 48px;
        object-fit: contain;
        border-radius: 8px;
    }
    
    /* お気に入りボタン (右上配置) */
    .favorite-btn {
        position: absolute;
        top: 5px;     /* 上からの距離 */
        right: 5px;   /* 右からの距離 */
        cursor: pointer;
        color: #e0e0e0; /* 未選択時はグレー */
        font-size: 16px;
        z-index: 10;
        transition: transform 0.2s, color 0.2s;
        padding: 5px;
    }
    .favorite-btn:hover {
        transform: scale(1.2);
        color: #ccc;
    }
    .favorite-btn.active {
        color: #FFD700; /* アクティブ時はゴールド */
        text-shadow: 0 0 2px rgba(0,0,0,0.2);
    }

    /* --- Bustarain / Option --- */
    #bustarain-container, #option-container, #fy-container {
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
    }
    .sub-tab-menu {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .sub-tab-btn {
        padding: 8px 20px;
        border: none;
        background: #e9ecef;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.2s;
    }
    .sub-tab-btn.active {
        background: #007bff;
        color: white;
    }
    
    /* アコーディオン */
    .accordion-item {
        background: #fff;
        margin-bottom: 10px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .accordion-header {
        padding: 15px;
        background: #fff;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: bold;
    }
    .accordion-header:hover { background: #f9f9f9; }
    .accordion-content {
        display: none;
        padding: 15px;
        border-top: 1px solid #eee;
        background: #fafafa;
    }
    
    /* Option Card */
    .option-card {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    /* --- ダークモード --- */
    body.dark-theme {
        background-color: #222;
        color: #eee;
    }
    body.dark-theme .header-area, 
    body.dark-theme .search-container,
    body.dark-theme .tab-item,
    body.dark-theme .icon-item,
    body.dark-theme .option-card,
    body.dark-theme .accordion-item,
    body.dark-theme .accordion-header {
        background: #333;
        border-color: #444;
        color: #eee;
    }
    body.dark-theme .tab-item:hover { background: #444; }
    body.dark-theme .tab-item.active { background: #0056b3; border-color: #0056b3; }
    body.dark-theme #appSearchInput { color: #eee; }
    body.dark-theme .accordion-content { background: #2c2c2c; border-top-color: #444; }
    body.dark-theme .sub-tab-btn { background: #444; color: #ddd; }
    body.dark-theme .sub-tab-btn.active { background: #0056b3; color: #fff; }

    /* スマホ対応 */
    @media (max-width: 600px) {
        .tab-item { padding: 8px 12px; font-size: 0.8rem; }
        .grid-container { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; }
        .icon-item { height: 90px; }
    }
  </style>
</head>
<body>

<div class="page-container">
    <header class="header-area">
      <div class="clock-area">
        <div class="clock-main-row">
            <div class="clock-content-wrapper">
              <div class="datetime-row">
                <div id="date"></div>
                <div id="clock"></div>
                <div id="countdown"></div>
                <div id="offline-status"></div>
                <div class="theme-switcher">
                  <div class="theme-dot light" onclick="setTheme('light')" title="ライトモード"></div>
                  <div class="theme-dot dark" onclick="setTheme('dark')" title="ダークモード"></div>
                </div>
              </div>
            </div>
            <div class="header-controls">
                <div class="header-speed-test">
                    <iframe src="https://fast.com/ja/" title="速度テスト" loading="lazy"></iframe>
                </div>
                <div class="control-icon" id="refresh-button" title="ページを再読み込み" style="cursor:pointer; margin-left:10px;">
                    <i class="fas fa-sync-alt"></i> 
                </div>
            </div>
        </div>
    </div>
</header>

<div class="tab-container">
  <div class="search-wrapper">
      <div class="search-container"> 
          <i class="fas fa-search"></i> 
          <input type="text" id="appSearchInput" placeholder="検索..."> 
          <i class="fas fa-times hidden" id="clearSearchBtn"></i>
      </div>
  </div>
   
  <div class="tab-menu">
    <!-- FY☆ タブ -->
    <div class="tab-item" id="tab-fy" onclick="activateTab('fy')"> 
        <i class="fas fa-star fy-icon"></i> FY☆ 
    </div>

    <!-- Apps タブ -->
    <div class="tab-item" id="tab-all-apps" onclick="activateTab('all-apps')"> 
        <i class="fas fa-th-large"></i> Apps 
    </div>
    
    <!-- Bustarain タブ -->
    <div class="tab-item" id="tab-bustarain" onclick="activateTab('bustarain')"> 
        <i class="fas fa-bus"></i> Bustarain 
    </div>

    <!-- Option タブ -->
    <div class="tab-item" id="tab-option" onclick="activateTab('option')"> 
        <i class="fas fa-cog"></i> Option 
    </div>
  </div>
</div>

<!-- メインコンテンツ -->
<div id="main-content-wrapper">

    <!-- FY☆ コンテナ -->
    <div id="fy-container" class="hidden">
        <h3 class="section-title"><i class="fas fa-star fy-icon"></i> お気に入り</h3>
        <div id="fy-content-area" class="grid-container">
            <!-- JSで描画 -->
        </div>
    </div>

    <!-- Apps コンテナ -->
    <div class="main-grid" id="main-grid">
      <div class="apps-area">
          <div id="recently-used-apps-container" class="hidden">
              <h3 class="section-title">最近使用したアプリ</h3>
              <div class="grid-container" id="recentlyUsedGridContainer"></div>
          </div>
          <hr id="section-divider" class="hidden" style="border:0; border-top:1px solid #ddd; margin: 20px;">
          <div id="all-apps-container">
              <h3 class="section-title">すべてのアプリ</h3>
              <div class="grid-container" id="gridContainer"></div>
          </div>
      </div>
    </div>

    <!-- Bustarain コンテナ -->
    <div id="bustarain-container" class="hidden">
        <div class="sub-tab-menu">
            <button class="sub-tab-btn active" data-target="train-content"><i class="fas fa-train"></i> Train</button>
            <button class="sub-tab-btn" data-target="bus-content"><i class="fas fa-bus"></i> BUS</button>
            <button class="sub-tab-btn" data-target="other-content"><i class="fas fa-info-circle"></i> その他</button>
        </div>
        
        <div id="train-content" class="sub-tab-content">
            <div class="accordion-item"><div class="accordion-header" data-src="train/wadmisaki-train.html">和田岬 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="train/itayado-train.html">帰）板宿新長田経由海岸線 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="train/Itayado-sannyou.html">板宿駅（山陽電車） <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        </div>
        
        <div id="bus-content" class="sub-tab-content hidden">
            <div class="accordion-item"><div class="accordion-header" data-src="bus/Buslocation.html">バスロケーション <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/iki-kaeri.html">行き・帰り（今出在家 ⇔ 鷹取団地）<i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/imadezaike.html">今出在家 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        </div>
        
        <div id="other-content" class="sub-tab-content hidden">
            <p style="text-align:center;">その他の情報エリア</p>
        </div>
    </div>

    <!-- Option コンテナ -->
    <div id="option-container" class="hidden">
        <h3 class="section-title">設定 (Option)</h3>
        <div class="option-card">
            <h4><i class="fas fa-info-circle"></i> アプリ情報</h4>
            <p>バージョン: 1.1.0</p>
            <p>開発者: Link First User</p>
        </div>
        <div class="option-card">
            <h4><i class="fas fa-database"></i> データ管理</h4>
            <button onclick="localStorage.clear(); location.reload();" style="padding:5px 10px; background:#dc3545; color:white; border:none; border-radius:5px; cursor:pointer;">設定をリセット</button>
        </div>
    </div>

</div> <!-- end main-content-wrapper -->

</div>
<script src="script.js"></script>
</body>
</html>
