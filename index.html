<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>サイト集</title>
  <link rel="icon" href="your-favicon.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* サイト集の基本スタイル */
    body {
      margin: 0;
      background-color: #ffffff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 0;
    }

    .clock-area {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      margin: 20px auto;
      border-radius: 20px;
      padding: 20px;
      max-width: 1200px;
      border: 1px solid rgba(0,0,0,0.05);
      text-align: center;
    }

    .clock-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    
    .datetime-row {
      display: flex;
      align-items: center;
      justify-content: center; /* 中央揃え */
      gap: 30px;
      flex-wrap: wrap; /* 折り返しを許可 */
    }

    .countdown-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      margin-top: 15px; /* 上部に余白を追加 */
    }

    #date {
      color: #333;
      font-weight: bold;
      font-size: 18px;
      letter-spacing: 1px;
    }

    #clock {
      color: #333;
      font-weight: bold;
      font-size: 24px;
      letter-spacing: 2px;
      font-family: 'Courier New', Courier, monospace;
    }
    
    #countdown {
      color: #667eea;
      font-weight: bold;
      font-size: 18px; /* 時刻とのバランスを調整 */
      letter-spacing: 1px;
    }

    .tab-container {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      margin: 20px auto 30px;
      border-radius: 20px;
      overflow: hidden;
      max-width: 1200px;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .tab-menu {
      display: flex;
    }

    .tab-item {
      flex: 1;
      text-align: center;
      padding: 15px 20px;
      color: #666;
      text-decoration: none;
      font-weight: bold;
      font-size: 14px;
      position: relative;
      transition: all 0.3s ease;
      border-radius: 16px;
      margin: 6px;
      border-right: 1px solid rgba(0,0,0,0.1);
      cursor: pointer;
      white-space: nowrap;
      min-width: 120px;
    }

    .tab-item:last-child {
      border-right: none;
    }

    .tab-item:hover {
      background-color: rgba(102, 126, 234, 0.1);
      color: #667eea;
      transform: translateY(-2px);
    }

    .tab-item.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #ffffff;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      transform: translateY(-2px);
    }
    
    .submenu {
      display: none;
      background: linear-gradient(135deg, #f0f2f5 0%, #e6eaef 100%);
      padding: 15px;
      border-radius: 15px;
      margin: 0 auto 15px;
      max-width: 1200px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      animation: slideDown 0.3s ease-out;
      position: relative;
      z-index: 10;
    }

    .submenu.show {
      display: block;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .game-buttons {
      display: flex;
      flex-direction: row;
      gap: 20px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .game-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-decoration: none;
      border-radius: 25px;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      width: 180px;
      justify-content: center;
    }

    .game-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }

    .game-button.apex {
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
    }
    .game-button.apex:hover {
      box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
      background: linear-gradient(135deg, #f7931e 0%, #ff6b35 100%);
    }

    .game-button.splatoon {
      background: linear-gradient(135deg, #00d4ff 0%, #ff6b8a 100%);
      box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
    }

    .status-submenu {
      display: flex;
      gap: 30px;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .status-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    .status-item-title { font-weight: bold; color: #333; font-size: 16px; }
    .status-speedtest-container, .status-weather-container {
      width: 350px;
      height: 200px;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    .status-speedtest-container { background-color: #000; }
    .status-weather-container { background-color: #fff; }

    .status-speedtest-container iframe,
    .status-weather-container iframe { width: 100%; height: 100%; border: none; }

    .main-content { padding: 20px; }
    .grid-container { display: flex; flex-direction: column; gap: 20px; max-width: 100%; padding: 10px; }
    .section { display: flex; align-items: flex-start; gap: 15px; }
    .section-title { display: flex; align-items: center; flex-shrink: 0; }
    .section-title-text { margin-right: 10px; line-height: 1.2; font-size: 18px; font-weight: bold; color: #333; }
    .section-title-line { width: 2px; height: 80px; background: linear-gradient(180deg, #ddd 0%, transparent 100%); }
    .section-icons { display: grid; grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); gap: 12px; flex: 1; justify-content: start; }
    .section-icons-left { display: flex; flex-wrap: wrap; gap: 12px; flex: 1; }
    .icon-item { text-align: center; width: 70px; margin: 0; position: relative; }
    .icon-link {
      width: 55px; height: 55px; background-color: #fff; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: flex; align-items: center; justify-content: center; text-decoration: none; color: #333; margin: 0 auto; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .icon-link:hover { transform: scale(1.1) translateY(-3px); background-color: #e6f2ff; box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
    .icon-link i { font-size: 24px; }
    .icon-img { width: 28px; height: 28px; border-radius: 8px; }
    .label-text { font-size: 11px; margin-top: 4px; color: #333; word-break: break-word; line-height: 1.1; }
    #google-container { position: relative; }
    #google-radial-menu { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
    #google-container.radial-active #google-radial-menu { opacity: 1; pointer-events: auto; }
    .radial-icon {
      position: absolute; top: 50%; left: 50%; width: 45px; height: 45px; margin-top: -22.5px; margin-left: -22.5px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; transform: scale(0.8); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 2px 8px rgba(0,0,0,0.2); z-index: 100;
    }
    .radial-img { width: 24px; height: 24px; }
    #google-container.radial-active .radial-icon { transform: scale(1); }
    #google-container.radial-active .radial-icon.calendar { transform: translate(0, -60px) scale(1); }
    #google-container.radial-active .radial-icon.photos { transform: translate(60px, 0) scale(1); }
    #google-container.radial-active .radial-icon.drive { transform: translate(0, 60px) scale(1); }
    #google-container.radial-active .radial-icon.gmail { transform: translate(-60px, 0) scale(1); }
    .radial-icon.calendar { background-color: #EBF2FC; } .radial-icon.photos { background-color: #FCE8E6; }
    .radial-icon.drive { background-color: #E6F4EA; } .radial-icon.gmail { background-color: #FEF7E0; }
    .section-row-three { display: flex; gap: 40px; align-items: flex-start; }
    .section-row-three .section { flex: 1; min-width: 0; }
    .section-row { display: flex; gap: 40px; align-items: flex-start; }
    .section-row .section { flex: 1; min-width: 0; }
    .answer-i-icon { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white !important; font-weight: bold; font-size: 20px; }
    .bustarain-icon { background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); color: white !important; }
    .remote-it-icon { background: linear-gradient(135deg, #4285f4 0%, #1976d2 100%); color: white !important; }

    /* --- ここからバス電光掲示板のスタイル --- */
    .bus-display-wrapper {
        max-width: 1200px;
        margin: 20px auto;
        font-family: 'MS Gothic', monospace;
    }
    .display-board {
        background-color: #e8f5e8; border: 3px solid #009900; border-radius: 10px; padding: 12px;
    }
    .main-header {
        display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 12px; flex-wrap: wrap;
    }
    .bus-stop-name { font-size: 18px; font-weight: bold; color: #009900; flex-shrink: 0; }
    .direction-controls { display: flex; gap: 8px; flex-wrap: wrap; }
    .schedule-type {
        font-size: 13px; color: #009900; font-weight: bold; background-color: #fff; padding: 3px 6px; border-radius: 5px; border: 2px solid #009900; flex-shrink: 0;
    }
    #justDepartedSection { margin-bottom: 8px; }
    .just-departed-info {
        font-size: 12px; color: #444; background-color: #e0e0e0; padding: 3px 8px; margin: 0 auto 4px auto; border: 1px solid #ccc;
        border-radius: 5px; max-width: 95%; display: flex; justify-content: center; align-items: center; gap: 8px; text-align: center;
    }
    .just-departed-info .route-number { font-size: 11px; padding: 1px 4px; border-width: 1px; margin-right: 4px; color: #333; border-color: #333; }
    .departures-row { display: flex; gap: 10px; }
    .departure-item { flex: 1; min-width: 0; }
    .next-departure-content {
        display: flex; justify-content: space-between; align-items: center; background-color: #fff; border-radius: 8px; padding: 8px 10px; border: 2px solid #009900; min-height: 65px;
    }
    .departure-details-left { display: flex; flex-direction: column; gap: 2px; }
    .departure-type-label { font-size: 14px; font-weight: bold; color: #333; }
    .next-departure-route { font-size: 13px; }
    .next-departure-time { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; }
    .next-departure-clock { font-size: 22px; font-weight: bold; color: #cc0000; }
    .time-and-button-row { display: flex; align-items: center; gap: 8px; }
    .next-departure-remaining { font-size: 16px; font-weight: bold; color: #009900; min-width: 105px; text-align: right; }
    .detail-button {
        display: inline-flex; justify-content: center; align-items: center; width: 24px; height: 24px; background-color: #0066cc;
        color: white; border: none; border-radius: 50%; font-size: 14px; font-weight: bold; text-decoration: none; cursor: pointer; transition: background-color 0.2s; flex-shrink: 0;
    }
    .detail-button:hover { background-color: #0052a3; }
    .route-number {
        display: inline-block; border: 2px solid #0066cc; padding: 1px 5px; margin-right: 6px; background-color: #fff;
        color: #0066cc; font-size: 13px; min-width: 22px; text-align: center;
    }
    .itayado-arrival { color: #cc6600; font-size: 11px; font-weight: bold; }
    .no-next-departure { color: #cc0000; font-size: 14px; text-align: center; padding: 10px; width: 100%; display: flex; align-items: center; justify-content: center; }
    .direction-button {
        background-color: #f0f0f0; border: 2px solid #333; padding: 6px 12px; margin: 0; font-size: 13px; font-weight: bold; cursor: pointer; border-radius: 5px; transition: all 0.3s ease;
    }
    .direction-button.active { background-color: #0066cc; color: white; border-color: #0066cc; }
    .direction-button:hover:not(.active) { background-color: #e0e0e0; }
    .blink { animation: blink 1s infinite; }
    @keyframes blink { 0%, 49% { opacity: 1; } 50%, 100% { opacity: 0.3; } }
    /* --- バス電光掲示板のスタイルここまで --- */

    /* --- ここから時間計算ツールのスタイル --- */
    .time-calculator-section {
      max-width: 1200px;
      margin: 20px auto;
      padding: 15px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      border-radius: 20px;
      border: 1px solid rgba(0,0,0,0.05);
      font-family: sans-serif;
    }
    .time-calculator-section .container { 
      display: flex; align-items: center; gap: 6px; justify-content: center; background: #fff; padding: 8px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex-wrap: wrap; 
    }
    .time-calculator-section input[type="time"], 
    .time-calculator-section input[type="number"] { 
      width: 80px; padding: 4px; font-size: 13px; 
    }
    .time-calculator-section button { 
      padding: 6px 10px; background: #2563eb; color: #fff; border: none; border-radius: 6px; font-size: 13px; cursor: pointer; 
    }
    /* ★★ 変更点: 結果表示のスタイル調整 ★★ */
    .time-calculator-section .container pre { 
      background: #eee; padding: 6px; font-size: 12px; border-radius: 6px; margin: 0; text-align: center; 
    }
    /* --- 時間計算ツールのスタイルここまで --- */

    @media (max-width: 900px) {
      .clock-area, .bus-display-wrapper, .tab-container, .submenu, .time-calculator-section { max-width: 95%; margin-left: auto; margin-right: auto; }
      .datetime-row { flex-direction: column; gap: 10px; }
      .tab-item { padding: 12px 16px; font-size: 13px; min-width: 100px; }
      .icon-item { width: 80px; }
      .icon-link { width: 60px; height: 60px; }
      .section-row, .section-row-three { flex-direction: column; gap: 20px; }
      .status-submenu { flex-direction: column; gap: 20px; align-items: center; }
      .status-speedtest-container, .status-weather-container { width: 300px; height: 180px; }
      
      .departures-row { flex-direction: column; gap: 8px; }
      .next-departure-time { flex-direction: row; align-items: center; gap: 8px; margin-top: 5px; }
      .next-departure-remaining { font-size: 18px; min-width: auto; text-align: left; }
    }
  </style>
</head>
<body>

  <!-- 時計エリア -->
  <div class="clock-area">
    <div class="clock-container">
      <div class="datetime-row">
        <div id="date">----/--/--(--)</div>
        <div id="clock">00:00:00</div>
        <div id="countdown">現在は授業時間外です</div>
      </div>
    </div>
  </div>

  <!-- ★★ 変更点: 時間計算ツールをここに移動 ★★ -->
  <div class="time-calculator-section">
    <div class="container">
      <label>基準 <input id="baseTime" type="time" step="1" value="12:00:00"></label>
      <label>＋ <input id="addHours" type="number" min="0" value="0">時</label>
      <label><input id="addMinutes" type="number" min="0" value="0">分</label>
      <label><input id="addSeconds" type="number" min="0" value="0">秒</label>
      <button id="calcBtn">計算</button>
      <!-- ★★ 変更点: 結果表示をcontainer内に移動 ★★ -->
      <pre id="result">結果：</pre>
    </div>
  </div>
  
  <!-- バス電光掲示板 -->
  <div class="bus-display-wrapper">
      <div class="display-board">
          <div class="main-header">
              <div class="bus-stop-name">鷹取団地前→</div>
              <div class="direction-controls">
                  <button id="shinkaichi-btn" class="direction-button">神戸駅前・兵庫駅・大学病院方面</button>
                  <button id="yoshidacho-btn" class="direction-button active">板宿・新長田駅前・鷹取駅前方面</button>
              </div>
              <div class="schedule-type" id="scheduleType"></div>
          </div>
          <div id="justDepartedSection"></div>
          <div class="departures-row" id="upcomingDeparturesContainer">
              <!-- 動的に生成される先発・次発情報 -->
          </div>
      </div>
  </div>

  <!-- タブメニュー -->
  <div class="tab-container">
    <div class="tab-menu">
      <div class="tab-item active" onclick="showHome()"> <i class="fas fa-home"></i> HOME </div>
      <div class="tab-item" onclick="toggleSomeStatus()"> <i class="fas fa-chart-line"></i> Some Status </div>
      <div class="tab-item" onclick="toggleGameStatus()"> <i class="fas fa-gamepad"></i> Game Status </div>
      <a href="https://sites.google.com/view/foretsy/管理者ページ" class="tab-item" target="_blank"> <i class="fas fa-cog"></i> ADMIN </a>
      <a href="https://sites.google.com/view/foretsy/裂け目" class="tab-item" target="_blank"> <i class="fas fa-route"></i> Portal </a>
    </div>
  </div>

  <!-- Game Status サブメニュー -->
  <div class="submenu" id="gameSubmenu">
    <div class="game-buttons">
      <a href="https://apexlegendsstatus.com/current-map" class="game-button apex" target="_blank"> <i class="fas fa-crosshairs"></i> Apex Legends </a>
      <a href="https://www.splatoon3-schedule.net" class="game-button splatoon" target="_blank"> <i class="fas fa-paint-brush"></i> Splatoon 3 </a>
    </div>
  </div>

  <!-- Some Status サブメニュー -->
  <div class="submenu" id="statusSubmenu">
    <div class="status-submenu">
      <div class="status-item">
        <div class="status-item-title">回線速度テスト</div>
        <div class="status-speedtest-container"> <iframe src="https://fast.com/ja/" title="速度テスト"></iframe> </div>
      </div>
      <div class="status-item">
        <div class="status-item-title">兵庫県警報・注意報</div>
        <div class="status-weather-container"> <iframe src="https://weathernews.jp/onebox/warn/hyogo/2810000/" title="ウェザーニュース警報・注意報"></iframe> </div>
      </div>
    </div>
  </div>

  <!-- メインコンテンツ -->
  <div class="main-content" id="mainContent">
    <!-- アイコンリンク集 -->
    <div class="grid-container">
      <div class="section">
        <div class="section-title"> <div class="section-title-text">Apps</div> <div class="section-title-line"></div> </div>
        <div class="section-icons">
          <div class="icon-item" id="google-container">
            <a href="https://www.google.com" class="icon-link" id="google-link"> <img src="https://www.google.com/favicon.ico" class="icon-img" alt="Google"> </a>
            <div id="google-radial-menu">
              <a href="https://calendar.google.com" target="_blank" class="radial-icon calendar"> <img src="https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_3_2x.png" class="radial-img" alt="Calendar"> </a>
              <a href="https://photos.google.com" target="_blank" class="radial-icon photos"> <img src="https://ssl.gstatic.com/images/branding/product/1x/photos_48dp.png" class="radial-img" alt="Photos"> </a>
              <a href="https://drive.google.com" target="_blank" class="radial-icon drive"> <img src="https://ssl.gstatic.com/images/branding/product/2x/drive_2020q4_48dp.png" class="radial-img" alt="Drive"> </a>
              <a href="https://mail.google.com" target="_blank" class="radial-icon gmail"> <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" class="radial-img" alt="Gmail"> </a>
            </div>
            <div class="label-text">Google</div>
          </div>
          <div class="icon-item"> <a href="https://www.yahoo.co.jp" class="icon-link" target="_blank"> <img src="https://www.yahoo.co.jp/favicon.ico" class="icon-img" alt="Yahoo!"> </a> <div class="label-text">Yahoo!</div> </div>
          <div class="icon-item"> <a href="https://x.com/i/timeline" class="icon-link" target="_blank"> <img src="https://twitter.com/favicon.ico" class="icon-img" alt="X"> </a> <div class="label-text">X</div> </div>
          <div class="icon-item"> <a href="https://www.instagram.com" class="icon-link" target="_blank"> <img src="https://static.cdninstagram.com/rsrc.php/v3/yI/r/VsNE-OHk_8a.png" class="icon-img" alt="Instagram"> </a> <div class="label-text">Instagram</div> </div>
          <div class="icon-item"> <a href="https://www.youtube.com/feed/subscriptions" class="icon-link" target="_blank"> <img src="https://www.youtube.com/favicon.ico" class="icon-img" alt="YouTube"> </a> <div class="label-text">YouTube</div> </div>
          <div class="icon-item"> <a href="https://www.youtube.com/feed/subscriptions/shorts" class="icon-link" target="_blank"> <i class="fab fa-youtube" style="color: #ff0000;"></i> </a> <div class="label-text">YT Shorts</div> </div>
          <div class="icon-item"> <a href="https://app.remote.it" class="icon-link remote-it-icon" target="_blank"> <i class="fas fa-desktop"></i> </a> <div class="label-text">Remote It</div> </div>
          <div class="icon-item"> <a href="https://www.tiktok.com" class="icon-link" target="_blank"> <img src="https://www.tiktok.com/favicon.ico" class="icon-img" alt="TikTok"> </a> <div class="label-text">TikTok</div> </div>
          <div class="icon-item"> <a href="https://www.twitch.tv" class="icon-link" target="_blank"> <img src="https://www.twitch.tv/favicon.ico" class="icon-img" alt="Twitch"> </a> <div class="label-text">Twitch</div> </div>
          <div class="icon-item"> <a href="https://discord.com/channels/@me" class="icon-link" target="_blank"> <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a69f118df70ad7828d4_icon_clyde_blurple_RGB.svg" class="icon-img" alt="Discord"> </a> <div class="label-text">Discord</div> </div>
          <div class="icon-item"> <a href="https://open.spotify.com/intl-ja" class="icon-link" target="_blank"> <img src="https://open.spotify.com/favicon.ico" class="icon-img" alt="Spotify"> </a> <div class="label-text">Spotify</div> </div>
          <div class="icon-item"> <a href="https://kotsu.city.kobe.lg.jp/" class="icon-link" target="_blank"> <i class="fas fa-subway" style="color: #0066cc;"></i> </a> <div class="label-text">神戸市交通局</div> </div>
          <div class="icon-item"> <a href="https://gigafile.nu/" class="icon-link" target="_blank"> <img src="https://gigafile.nu/favicon.ico" class="icon-img" alt="GigaFile便"> </a> <div class="label-text">GigaFile</div> </div>
        </div>
      </div>
      <div class="section-row-three">
        <div class="section">
          <div class="section-title"> <div class="section-title-text">AI</div> <div class="section-title-line"></div> </div>
          <div class="section-icons-left">
            <div class="icon-item"> <a href="https://chatgpt.com" class="icon-link" target="_blank"> <i class="fas fa-robot" style="color: #10a37f;"></i> </a> <div class="label-text">ChatGPT</div> </div>
            <div class="icon-item"> <a href="https://aistudio.google.com/prompts/new_chat" class="icon-link" target="_blank"> <i class="fas fa-brain" style="color: #4285f4;"></i> </a> <div class="label-text">Google AI</div> </div>
            <div class="icon-item"> <a href="https://claude.ai" class="icon-link" target="_blank"> <i class="fas fa-comments" style="color: #ff6b47;"></i> </a> <div class="label-text">Claude AI</div> </div>
          </div>
        </div>
        <div class="section">
          <div class="section-title"> <div class="section-title-text">Sites</div> <div class="section-title-line"></div> </div>
          <div class="section-icons-left">
            <div class="icon-item"> <a href="https://sites.google.com/view/bustar/home" class="icon-link bustarain-icon" target="_blank"> <i class="fas fa-bus"></i> </a> <div class="label-text">BUSTARAIN</div> </div>
            <div class="icon-item"> <a href="https://sites.google.com/view/answer-i/home" class="icon-link answer-i-icon" target="_blank"> <i class="fas fa-question-circle"></i> </a> <div class="label-text">Answer I</div> </div>
          </div>
        </div>
        <div class="section">
          <div class="section-title"> <div class="section-title-text">ブルーロック</div> <div class="section-title-line"></div> </div>
          <div class="section-icons-left">
            <div class="icon-item"> <a href="https://rawkuro.net/manga/bururokku004/di285hua" class="icon-link" target="_blank"> <i class="fas fa-futbol" style="color: #1e90ff;"></i> </a> <div class="label-text">Rawkuro</div> </div>
            <div class="icon-item"> <a href="https://mn4u.net/tgm-84/" class="icon-link" target="_blank"> <i class="fas fa-book-open" style="color: #ff6347;"></i> </a> <div class="label-text">MN4U</div> </div>
            <div class="icon-item"> <a href="https://kmanga.kodansha.com/title/10008/episode/360423" class="icon-link" target="_blank"> <i class="fas fa-book" style="color: #2e8b57;"></i> </a> <div class="label-text">講談社</div> </div>
          </div>
        </div>
      </div>
      <div class="section-row">
        <div class="section">
          <div class="section-title"> <div class="section-title-text">フリマ</div> <div class="section-title-line"></div> </div>
          <div class="section-icons-left">
            <div class="icon-item"> <a href="https://www.mercari.com/jp/" class="icon-link" target="_blank"> <i class="fas fa-shopping-bag" style="color: #ff6b35;"></i> </a> <div class="label-text">メルカリ</div> </div>
            <div class="icon-item"> <a href="https://paypayfleamarket.yahoo.co.jp/" class="icon-link" target="_blank"> <i class="fas fa-shopping-cart" style="color: #ff0033;"></i> </a> <div class="label-text">Yahoo!フリマ</div> </div>
            <div class="icon-item"> <a href="https://member.kms.kuronekoyamato.co.jp/member" class="icon-link" target="_blank"> <i class="fas fa-truck" style="color: #00a54f;"></i> </a> <div class="label-text">ヤマト運輸</div> </div>
          </div>
        </div>
        <div class="section">
          <div class="section-title"> <div class="section-title-text">Create Site</div> <div class="section-title-line"></div> </div>
          <div class="section-icons-left">
            <div class="icon-item"> <a href="https://sites.google.com/new" class="icon-link" target="_blank"> <img src="https://ssl.gstatic.com/sites/p/f9e774/system/app/images/favicon.ico" class="icon-img" alt="Google Sites"> </a> <div class="label-text">Google Sites</div> </div>
            <div class="icon-item"> <a href="https://github.com" class="icon-link" target="_blank"> <i class="fab fa-github" style="color: #181717;"></i> </a> <div class="label-text">GitHub</div> </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- サイト集のJavaScript ---
    const schedule = [
      { name: "1限", start: "08:50", end: "09:40" }, { name: "休憩", start: "09:40", end: "09:50" }, { name: "2限", start: "09:50", end: "10:40" }, { name: "休憩", start: "10:40", end: "10:50" },
      { name: "3限", start: "10:50", end: "11:40" }, { name: "休憩", start: "11:40", end: "11:50" }, { name: "4限", start: "11:50", end: "12:40" }, { name: "昼休み", start: "12:40", end: "13:20" },
      { name: "5限", start: "13:20", end: "14:10" }, { name: "休憩", start: "14:10", end: "14:20" }, { name: "6限", start: "14:20", end: "15:10" }, { name: "休憩", start: "15:10", end: "15:20" },
      { name: "7限", start: "15:20", end: "16:10" }, { name: "休憩", start: "16:10", end: "16:40" }, { name: "8限", start: "16:40", end: "17:30" }, { name: "休憩", start: "17:30", end: "17:40" },
      { name: "9限", start: "17:40", end: "18:30" }
    ];
    let isGameStatusOpen = false;
    let isSomeStatusOpen = false;

    function parseTimeToDate(timeStr) {
      const [h, m] = timeStr.split(":").map(Number); const now = new Date(); now.setHours(h, m, 0, 0); return now;
    }
    function getCurrentPeriod(now) {
      for (const period of schedule) {
        const start = parseTimeToDate(period.start); const end = parseTimeToDate(period.end);
        if (now >= start && now < end) { return { ...period, startTime: start, endTime: end }; }
      } return null;
    }
    function updateCountdown(now) {
      const period = getCurrentPeriod(now);
      const countdownEl = document.getElementById("countdown");
      if (period) {
        const remainingMs = period.endTime - now; const totalMs = period.endTime - period.startTime;
        const elapsedMs = totalMs - remainingMs;
        const percent = Math.floor((elapsedMs / totalMs) * 100);
        const totalSec = Math.floor(remainingMs / 1000);
        const h = String(Math.floor(totalSec / 3600)).padStart(2, '0');
        const m = String(Math.floor((totalSec % 3600) / 60)).padStart(2, '0');
        const s = String(totalSec % 60).padStart(2, '0');
        countdownEl.textContent = `${period.name} 残り: ${h}:${m}:${s} (${percent}%)`;
        document.title = `${period.name} Left: ${h}:${m}:${s}`;
      } else {
        countdownEl.textContent = "現在は授業時間外です";
        document.title = "授業時間外";
      }
    }
    function updateClockAndDate() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0'); const m = String(now.getMinutes()).padStart(2, '0'); const s = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('clock').textContent = `${h}:${m}:${s}`;
      const year = now.getFullYear(); const month = String(now.getMonth() + 1).padStart(2, '0'); const day = String(now.getDate()).padStart(2, '0');
      const weekdays = ['日','月','火','水','木','金','土']; const weekday = weekdays[now.getDay()];
      document.getElementById('date').textContent = `${year}/${month}/${day}(${weekday})`;
      updateCountdown(now);
    }
    function showHome() {
      document.querySelectorAll('.tab-item').forEach(tab => tab.classList.remove('active'));
      document.querySelector('.tab-item').classList.add('active');
      document.getElementById('gameSubmenu').classList.remove('show');
      document.getElementById('statusSubmenu').classList.remove('show');
      isGameStatusOpen = false; isSomeStatusOpen = false;
      document.getElementById('mainContent').style.display = 'block';
    }
    function toggleSomeStatus() {
      const statusSubmenu = document.getElementById('statusSubmenu'); const gameSubmenu = document.getElementById('gameSubmenu');
      document.querySelectorAll('.tab-item').forEach(tab => tab.classList.remove('active'));
      gameSubmenu.classList.remove('show'); isGameStatusOpen = false;
      if (!isSomeStatusOpen) {
        statusSubmenu.classList.add('show'); isSomeStatusOpen = true;
        document.querySelectorAll('.tab-item')[1].classList.add('active');
        document.getElementById('mainContent').style.display = 'none';
      } else {
        statusSubmenu.classList.remove('show'); isSomeStatusOpen = false;
        document.querySelector('.tab-item').classList.add('active');
        document.getElementById('mainContent').style.display = 'block';
      }
    }
    function toggleGameStatus() {
      const gameSubmenu = document.getElementById('gameSubmenu'); const statusSubmenu = document.getElementById('statusSubmenu');
      document.querySelectorAll('.tab-item').forEach(tab => tab.classList.remove('active'));
      statusSubmenu.classList.remove('show'); isSomeStatusOpen = false;
      if (!isGameStatusOpen) {
        gameSubmenu.classList.add('show'); isGameStatusOpen = true;
        document.querySelectorAll('.tab-item')[2].classList.add('active');
        document.getElementById('mainContent').style.display = 'none';
      } else {
        gameSubmenu.classList.remove('show'); isGameStatusOpen = false;
        document.querySelector('.tab-item').classList.add('active');
        document.getElementById('mainContent').style.display = 'block';
      }
    }
    function setupGoogleIconInteraction() {
        const googleContainer = document.getElementById('google-container'); const googleLink = document.getElementById('google-link'); let clickTimer = null; const doubleClickThreshold = 250;
        googleLink.addEventListener('click', function(event) {
            event.preventDefault();
            if (clickTimer) { clearTimeout(clickTimer); clickTimer = null; window.open(googleLink.href, '_blank'); googleContainer.classList.remove('radial-active'); }
            else { clickTimer = setTimeout(() => { clickTimer = null; googleContainer.classList.toggle('radial-active'); }, doubleClickThreshold); }
        });
        document.addEventListener('click', function(event) { if (googleContainer.classList.contains('radial-active') && !googleContainer.contains(event.target)) { googleContainer.classList.remove('radial-active'); } });
    }

    // --- バス電光掲示板のJavaScript ---
    const timetables = {
        shinkaichi: {
            route11: { name: "神戸駅前方面", number: "11", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0016", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [12, 27, 42] }, { hour: 7, minutes: [7, 24, 38, 52, 59] }, { hour: 8, minutes: [11, 21, 32, 44, 51] }, { hour: 9, minutes: [5, 13, 37, 49] }, { hour: 10, minutes: [25, 50] }, { hour: 11, minutes: [1, 25] }, { hour: 12, minutes: [2, 25] }, { hour: 13, minutes: [2, 25] }, { hour: 14, minutes: [2, 25] }, { hour: 15, minutes: [2, 25] }, { hour: 16, minutes: [2, 25] }, { hour: 17, minutes: [2, 25] }, { hour: 18, minutes: [2, 25, 49] }, { hour: 19, minutes: [1, 25, 50] }, { hour: 20, minutes: [19, 49] }, { hour: 21, minutes: [29, 49] }, { hour: 22, minutes: [7, 25, 39, 53] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [12, 27, 42, 55] }, { hour: 7, minutes: [17, 37, 57] }, { hour: 8, minutes: [17, 37, 57] }, { hour: 9, minutes: [19, 55] }, { hour: 10, minutes: [19, 31, 55] }, { hour: 11, minutes: [19, 31, 55] }, { hour: 12, minutes: [19, 31, 55] }, { hour: 13, minutes: [19, 31, 55] }, { hour: 14, minutes: [19, 31, 55] }, { hour: 15, minutes: [19, 31, 55] }, { hour: 16, minutes: [19, 31, 55] }, { hour: 17, minutes: [19, 31, 55] }, { hour: 18, minutes: [19, 31, 55] }, { hour: 19, minutes: [31, 55] }, { hour: 20, minutes: [37] }, { hour: 21, minutes: [12, 52] }, { hour: 22, minutes: [12, 32, 53] }, { hour: 23, minutes: [] }] },
            route13: { name: "地下鉄長田駅 経由 兵庫駅方面", number: "13", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0017", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [54] }, { hour: 9, minutes: [] }, { hour: 10, minutes: [7, 56] }, { hour: 11, minutes: [47] }, { hour: 12, minutes: [37] }, { hour: 13, minutes: [27] }, { hour: 14, minutes: [15] }, { hour: 15, minutes: [7, 57] }, { hour: 16, minutes: [42] }, { hour: 17, minutes: [22] }, { hour: 18, minutes: [2, 42] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [7, 27, 47] }, { hour: 8, minutes: [7, 27, 47] }, { hour: 9, minutes: [7, 31, 43] }, { hour: 10, minutes: [7, 43] }, { hour: 11, minutes: [7, 43] }, { hour: 12, minutes: [7, 43] }, { hour: 13, minutes: [7, 43] }, { hour: 14, minutes: [7, 43] }, { hour: 15, minutes: [7, 43] }, { hour: 16, minutes: [7, 43] }, { hour: 17, minutes: [7, 43] }, { hour: 18, minutes: [7, 43] }, { hour: 19, minutes: [7, 19, 43] }, { hour: 20, minutes: [7, 52] }, { hour: 21, minutes: [32] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }] },
            route110: { name: "大学病院 経由 神戸駅方面", number: "110・112", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0122", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [55] }, { hour: 7, minutes: [17, 31, 45] }, { hour: 8, minutes: [5, 16, 26, 38, 57] }, { hour: 9, minutes: [1, 13, 37] }, { hour: 10, minutes: [13, 37, 49] }, { hour: 11, minutes: [13, 37, 49] }, { hour: 12, minutes: [13, 37, 49] }, { hour: 13, minutes: [13, 37, 49] }, { hour: 14, minutes: [13, 37, 49] }, { hour: 15, minutes: [13, 37, 49] }, { hour: 16, minutes: [13, 37, 49] }, { hour: 17, minutes: [13, 37, 49] }, { hour: 18, minutes: [13, 38] }, { hour: 19, minutes: [13, 37] }, { hour: 20, minutes: [5, 34] }, { hour: 21, minutes: [9] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [7, 27, 47] }, { hour: 8, minutes: [7, 27, 47] }, { hour: 9, minutes: [7, 31, 43] }, { hour: 10, minutes: [7, 43] }, { hour: 11, minutes: [7, 43] }, { hour: 12, minutes: [7, 43] }, { hour: 13, minutes: [7, 43] }, { hour: 14, minutes: [7, 43] }, { hour: 15, minutes: [7, 43] }, { hour: 16, minutes: [7, 43] }, { hour: 17, minutes: [7, 43] }, { hour: 18, minutes: [7, 43] }, { hour: 19, minutes: [7, 19, 43] }, { hour: 20, minutes: [7, 52] }, { hour: 21, minutes: [32] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }] }
        },
        yoshidacho: {
            route11A: { name: "板宿止まり", number: "11A", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0015", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [21, 31, 53] }, { hour: 7, minutes: [14, 35, 53] }, { hour: 8, minutes: [12, 29, 48] }, { hour: 9, minutes: [13] }, { hour: 10, minutes: [9, 33] }, { hour: 11, minutes: [21] }, { hour: 12, minutes: [22] }, { hour: 13, minutes: [25] }, { hour: 14, minutes: [25] }, { hour: 15, minutes: [25] }, { hour: 16, minutes: [25] }, { hour: 17, minutes: [26, 58] }, { hour: 18, minutes: [38] }, { hour: 19, minutes: [8, 41] }, { hour: 20, minutes: [5, 39] }, { hour: 21, minutes: [15, 45] }, { hour: 22, minutes: [0, 30, 45] }, { hour: 23, minutes: [5] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [21] }, { hour: 7, minutes: [9, 21, 46] }, { hour: 8, minutes: [11, 35] }, { hour: 9, minutes: [12] }, { hour: 10, minutes: [0, 24] }, { hour: 11, minutes: [0, 24] }, { hour: 12, minutes: [1, 25] }, { hour: 13, minutes: [1, 25] }, { hour: 14, minutes: [1, 25] }, { hour: 15, minutes: [1, 25] }, { hour: 16, minutes: [1, 25, 47] }, { hour: 17, minutes: [8, 28, 48] }, { hour: 18, minutes: [8] }, { hour: 19, minutes: [7, 41, 53] }, { hour: 20, minutes: [15, 51] }, { hour: 21, minutes: [15, 39, 54] }, { hour: 22, minutes: [24, 44] }, { hour: 23, minutes: [] }] },
            route11B: { name: "板宿 経由 松原町５丁目方面", number: "11B", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0015", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [] }, { hour: 9, minutes: [45] }, { hour: 10, minutes: [57] }, { hour: 11, minutes: [58] }, { hour: 12, minutes: [] }, { hour: 13, minutes: [1] }, { hour: 14, minutes: [1] }, { hour: 15, minutes: [1] }, { hour: 16, minutes: [1] }, { hour: 17, minutes: [1] }, { hour: 18, minutes: [8] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [] }, { hour: 9, minutes: [36] }, { hour: 10, minutes: [36] }, { hour: 11, minutes: [37] }, { hour: 12, minutes: [37] }, { hour: 13, minutes: [37] }, { hour: 14, minutes: [37] }, { hour: 15, minutes: [37] }, { hour: 16, minutes: [37] }, { hour: 17, minutes: [38] }, { hour: 18, minutes: [42] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }] },
            route13: { name: "板宿 経由 新長田駅前方面", number: "13", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0017", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [13] }, { hour: 9, minutes: [26] }, { hour: 10, minutes: [15] }, { hour: 11, minutes: [7, 57] }, { hour: 12, minutes: [47] }, { hour: 13, minutes: [35] }, { hour: 14, minutes: [27] }, { hour: 15, minutes: [17] }, { hour: 16, minutes: [2, 41] }, { hour: 17, minutes: [21] }, { hour: 18, minutes: [1] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [13] }, { hour: 9, minutes: [26] }, { hour: 10, minutes: [15] }, { hour: 11, minutes: [7, 57] }, { hour: 12, minutes: [47] }, { hour: 13, minutes: [35] }, { hour: 14, minutes: [27] }, { hour: 15, minutes: [17] }, { hour: 16, minutes: [2, 41] }, { hour: 17, minutes: [21] }, { hour: 18, minutes: [1] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }] },
            route110A: { name: "板宿止まり", number: "110A", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0122", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [41] }, { hour: 7, minutes: [3, 26, 46] }, { hour: 8, minutes: [7, 25, 43] }, { hour: 9, minutes: [8, 36] }, { hour: 10, minutes: [24] }, { hour: 11, minutes: [12, 36] }, { hour: 12, minutes: [12, 39] }, { hour: 13, minutes: [15, 39] }, { hour: 14, minutes: [16, 39] }, { hour: 15, minutes: [15, 39] }, { hour: 16, minutes: [15, 39] }, { hour: 17, minutes: [15, 40] }, { hour: 18, minutes: [20, 50] }, { hour: 19, minutes: [20] }, { hour: 20, minutes: [16, 52] }, { hour: 21, minutes: [31] }, { hour: 22, minutes: [16] }, { hour: 23, minutes: [26] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [36] }, { hour: 8, minutes: [0] }, { hour: 9, minutes: [3] }, { hour: 10, minutes: [15] }, { hour: 11, minutes: [15] }, { hour: 12, minutes: [15] }, { hour: 13, minutes: [15] }, { hour: 14, minutes: [15] }, { hour: 15, minutes: [15] }, { hour: 16, minutes: [15] }, { hour: 17, minutes: [19] }, { hour: 18, minutes: [20] }, { hour: 19, minutes: [20] }, { hour: 20, minutes: [40] }, { hour: 21, minutes: [28] }, { hour: 22, minutes: [11] }, { hour: 23, minutes: [6] }] },
            route110B: { name: "板宿 経由 鷹取駅方面", number: "110B", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0122", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [1, 19, 37] }, { hour: 9, minutes: [24] }, { hour: 10, minutes: [] }, { hour: 11, minutes: [] }, { hour: 12, minutes: [] }, { hour: 13, minutes: [] }, { hour: 14, minutes: [] }, { hour: 15, minutes: [] }, { hour: 16, minutes: [] }, { hour: 17, minutes: [] }, { hour: 18, minutes: [30] }, { hour: 19, minutes: [0, 32, 56] }, { hour: 20, minutes: [28] }, { hour: 21, minutes: [4] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [24] }, { hour: 9, minutes: [27] }, { hour: 10, minutes: [] }, { hour: 11, minutes: [] }, { hour: 12, minutes: [] }, { hour: 13, minutes: [] }, { hour: 14, minutes: [] }, { hour: 15, minutes: [] }, { hour: 16, minutes: [] }, { hour: 17, minutes: [32, 56] }, { hour: 18, minutes: [32] }, { hour: 19, minutes: [4] }, { hour: 20, minutes: [4] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }] },
            route112: { name: "五位ノ池 経由 鷹取駅方面", number: "112", detailUrl: "https://location.its-mo.com/usersite/kobe/US0005/search/jp?busStopCode=0440&directionId=kobe0126", weekdays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [] }, { hour: 9, minutes: [] }, { hour: 10, minutes: [47] }, { hour: 11, minutes: [48] }, { hour: 12, minutes: [51] }, { hour: 13, minutes: [51] }, { hour: 14, minutes: [51] }, { hour: 15, minutes: [51] }, { hour: 16, minutes: [51] }, { hour: 17, minutes: [50] }, { hour: 18, minutes: [] }, { hour: 19, minutes: [] }, { hour: 20, minutes: [] }, { hour: 21, minutes: [] }, { hour: 22, minutes: [] }, { hour: 23, minutes: [] }], holidays: [{ hour: 5, minutes: [] }, { hour: 6, minutes: [] }, { hour: 7, minutes: [] }, { hour: 8, minutes: [48] }, { hour: 9, minutes: [51] }, { hour: 10, minutes: [51] }, { hour: 11, minutes: [51] }, { hour: 12, minutes: [51] }, { hour: 13, minutes: [51] }, { hour: 14, minutes: [51] }, { hour: 15, minutes: [51] }, { hour: 16, minutes: [59] }, { hour: 17, minutes: [] }, { hour: 18, minutes: [40] }, { hour: 19, minutes: [28] }, { hour: 20, minutes: [28] }, { hour: 21, minutes: [11] }, { hour: 22, minutes: [6] }, { hour: 23, minutes: [] }] }
        }
    };
    let currentDirection = 'yoshidacho';
    function getBusCurrentDateTime() { return new Date(); }
    function updateScheduleType() {
        const now = getBusCurrentDateTime(); const scheduleTypeElement = document.getElementById('scheduleType');
        if (isHoliday(now)) { scheduleTypeElement.textContent = '休日ダイヤ'; scheduleTypeElement.style.color = '#cc0000'; scheduleTypeElement.style.borderColor = '#cc0000'; }
        else { scheduleTypeElement.textContent = '平日ダイヤ'; scheduleTypeElement.style.color = '#009900'; scheduleTypeElement.style.borderColor = '#009900'; }
    }
    function isHoliday(date) {
        const day = date.getDay(); const month = date.getMonth() + 1; const dateNum = date.getDate(); const year = date.getFullYear();
        if (year === 2025 && month === 8 && dateNum === 15) { return true; } return day === 0 || day === 6;
    }
    function getAllDepartures() {
        const now = getBusCurrentDateTime(); const fiveMinutesAgo = new Date(now.getTime() - 5 * 60 * 1000);
        const allDepartures = []; const currentTimetable = timetables[currentDirection]; const routesToShow = Object.keys(currentTimetable);
        const collectDepartures = (date) => {
            const scheduleType = isHoliday(date) ? 'holidays' : 'weekdays';
            routesToShow.forEach(routeKey => {
                const routeInfo = currentTimetable[routeKey]; if (!routeInfo) return;
                const schedule = routeInfo[scheduleType];
                schedule.forEach(hourData => {
                    hourData.minutes.forEach(minute => {
                        const departureDate = new Date(date); departureDate.setHours(hourData.hour, minute, 0, 0);
                        allDepartures.push({ routeName: routeInfo.name, routeNumber: routeInfo.number, date: departureDate, detailUrl: routeInfo.detailUrl });
                    });
                });
            });
        };
        const today = new Date(now); const yesterday = new Date(now); yesterday.setDate(now.getDate() - 1);
        collectDepartures(yesterday); collectDepartures(today);
        return allDepartures.filter(dep => dep.date >= fiveMinutesAgo).sort((a, b) => a.date - b.date);
    }
    function updateJustDeparted(allDepartures) {
        const justDepartedSection = document.getElementById('justDepartedSection'); const now = getBusCurrentDateTime();
        const recentlyDeparted = allDepartures.filter(dep => dep.date < now && (now.getTime() - dep.date.getTime()) < 5 * 60 * 1000);
        justDepartedSection.innerHTML = ''; 
        if (recentlyDeparted.length > 0) {
            recentlyDeparted.forEach(dep => {
                const timeStr = `${String(dep.date.getHours()).padStart(2, '0')}:${String(dep.date.getMinutes()).padStart(2, '0')}`;
                const infoDiv = document.createElement('div'); infoDiv.className = 'just-departed-info';
                infoDiv.innerHTML = `<span><span class="route-number">${dep.routeNumber}</span><strong>${dep.routeName}</strong> (${timeStr}発) の定刻は過ぎました。</span>`;
                justDepartedSection.appendChild(infoDiv);
            });
        }
    }
    function createDepartureHTML(departure, type) {
        const depTime = departure.date; const timeStr = `${String(depTime.getHours()).padStart(2, '0')}:${String(depTime.getMinutes()).padStart(2, '0')}`;
        let arrivalTimeInfo = '';
        if (currentDirection === 'yoshidacho') {
            const arrivalTime = new Date(depTime.getTime() + 7 * 60000);
            const arrivalTimeStr = `${String(arrivalTime.getHours()).padStart(2, '0')}:${String(arrivalTime.getMinutes()).padStart(2, '0')}`;
            arrivalTimeInfo = `<div class="itayado-arrival">板宿 ${arrivalTimeStr} 着</div>`;
        }
        let detailButtonHTML = '';
        if (departure.detailUrl) { detailButtonHTML = `<a href="${departure.detailUrl}" class="detail-button" target="_blank" rel="noopener noreferrer">※</a>`; }
        return `
            <div class="departure-item">
                <div class="next-departure-content">
                    <div class="departure-details-left">
                        <div class="departure-type-label">【${type}】</div>
                        <div class="next-departure-route">
                            <span class="route-number">${departure.routeNumber}</span>${departure.routeName}
                        </div>
                        ${arrivalTimeInfo}
                    </div>
                    <div class="next-departure-time">
                        <div class="next-departure-clock">${timeStr}</div>
                        <div class="time-and-button-row">
                            <div class="next-departure-remaining"><span class="remaining-time-countdown" data-deptime="${depTime.getTime()}"></span></div>
                            ${detailButtonHTML}
                        </div>
                    </div>
                </div>
            </div>`;
    }
    function updateUpcomingDepartures(allDepartures) {
        const container = document.getElementById('upcomingDeparturesContainer');
        const upcomingDepartures = allDepartures.filter(dep => dep.date >= getBusCurrentDateTime());
        const nextDeparture = upcomingDepartures[0]; const secondDeparture = upcomingDepartures[1];
        if (!nextDeparture) { container.innerHTML = `<div class="no-next-departure">本日の運行は終了しました</div>`; return; }
        let html = createDepartureHTML(nextDeparture, '先発');
        if (secondDeparture) { html += createDepartureHTML(secondDeparture, '次発'); }
        else { html += `<div class="departure-item"><div class="next-departure-content"><div class="departure-details-left"><div class="departure-type-label">【次発】</div></div><div class="no-next-departure" style="padding:0;">ありません</div></div></div>`; }
        container.innerHTML = html;
    }
    function updateBusCountdowns() {
        const countdownElements = document.querySelectorAll('.remaining-time-countdown'); const now = new Date().getTime();
        countdownElements.forEach(el => {
            const depTime = parseInt(el.dataset.deptime, 10); if (isNaN(depTime)) return;
            const diff = depTime - now; const remainingDiv = el.closest('.next-departure-remaining');
            if (diff < 0) { el.textContent = "出発"; if(remainingDiv) remainingDiv.classList.remove('blink'); return; }
            const minutes = Math.floor(diff / 60000); const seconds = Math.floor((diff % 60000) / 1000);
            el.textContent = `Left ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            if(remainingDiv) { if (diff < 60000) { remainingDiv.classList.add('blink'); } else { remainingDiv.classList.remove('blink'); } }
        });
    }
    function updateDisplay() {
        const allDepartures = getAllDepartures();
        updateScheduleType(); updateJustDeparted(allDepartures); updateUpcomingDepartures(allDepartures); updateBusCountdowns();
    }
    function changeDirection(direction) {
        currentDirection = direction; updateDisplay();
        document.getElementById('shinkaichi-btn').classList.toggle('active', direction === 'shinkaichi');
        document.getElementById('yoshidacho-btn').classList.toggle('active', direction === 'yoshidacho');
    }

    // --- ここから時間計算ツールのJavaScript ---
    function pad(n){return String(n).padStart(2,'0');}

    function parseTimeInput(timeStr){
      const parts = timeStr.split(':').map(Number);
      if(parts.length===2) parts.push(0);
      const [h,m,s] = parts; return {h,m,s};
    }

    function calc(){
      const t = parseTimeInput(document.getElementById('baseTime').value);
      const h = +document.getElementById('addHours').value;
      const m = +document.getElementById('addMinutes').value;
      const s = +document.getElementById('addSeconds').value;

      const base = t.h*3600 + t.m*60 + t.s;
      const add = h*3600 + m*60 + s;
      const total = base + add;

      const day = 24*3600;
      const off = Math.floor(total/day);
      const sec = total % day;

      const nh = Math.floor(sec/3600);
      const nm = Math.floor((sec%3600)/60);
      const ns = sec%60;

      document.getElementById('result').textContent = `結果：${pad(nh)}:${pad(nm)}:${pad(ns)} (${off===0?'同日':off+'日後'})`;
    }
    // --- 時間計算ツールのJavaScriptここまで ---

    // 初期化と定期実行
    function init() {
      // サイト集の初期化
      updateClockAndDate(); 
      showHome(); 
      setupGoogleIconInteraction();
      
      // バス電光掲示板の初回表示とイベントリスナー設定
      updateDisplay(); 
      document.getElementById('shinkaichi-btn').addEventListener('click', () => changeDirection('shinkaichi'));
      document.getElementById('yoshidacho-btn').addEventListener('click', () => changeDirection('yoshidacho'));

      // 時間計算ツールのイベントリスナーを追加
      document.getElementById('calcBtn').addEventListener('click', calc);
    }
    
    // 定期実行処理
    setInterval(() => { 
        updateClockAndDate(); 
        updateBusCountdowns(); 
    }, 1000); // 1秒ごとに時計とバスのカウントダウンを更新
    setInterval(updateDisplay, 30000); // 30秒ごとにバスデータを更新
    
    // DOM読み込み完了後に初期化関数を実行
    document.addEventListener('DOMContentLoaded', init);
  </script>

</body>
</html>
