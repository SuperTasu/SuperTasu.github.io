<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ZeroHop</title>
  <link rel="icon" href="your-favicon.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- ★★ 追加: Google Material Symbols ★★ -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color-primary: #333;
      --text-color-secondary: #666;
      --card-bg: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      --card-border-color: rgba(0,0,0,0.05);
      --card-shadow: 0 4px 16px rgba(0,0,0,0.1);
      --icon-bg: #fff;
      --icon-shadow: 0 4px 12px rgba(0,0,0,0.15);
      --tab-active-text: #ffffff;
      --input-bg: #e9ecef;
      --memo-bg: rgba(255, 255, 255, 0.8);
      --memo-border: #dcdcdc;
    }

    body.dark-theme {
      --bg-color: #434343;
      --text-color-primary: #f5f5f5;
      --text-color-secondary: #aaa;
      --card-bg: linear-gradient(135deg, #2c2c2c 0%, #3a3a3a 100%);
      --card-border-color: rgba(255,255,255,0.1);
      --card-shadow: 0 4px 16px rgba(0,0,0,0.4);
      --icon-bg: #555;
      --icon-shadow: 0 4px 12px rgba(0,0,0,0.5);
      --tab-active-text: #ffffff;
      --input-bg: #3a3a3a;
      --memo-bg: rgba(40, 40, 40, 0.8);
      --memo-border: #555;
    }
    
    body { margin: 0; background-color: var(--bg-color); color: var(--text-color-primary); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; transition: background-color 0.3s, color 0.3s; padding: 10px; box-sizing: border-box; }
    
    .page-container { max-width: 1400px; margin: 0 auto; }

    /* ★★ 変更: ヘッダーエリアのレイアウト ★★ */
    .header-area { background: var(--card-bg); box-shadow: var(--card-shadow); border-radius: 20px; padding: 15px; border: 1px solid var(--card-border-color); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
    .clock-wrapper { display: flex; align-items: center; flex-wrap: wrap; gap: 15px; flex-grow: 1; justify-content: center; }
    .datetime-row { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
    #date, #clock, #countdown { color: var(--text-color-primary); font-weight: bold; }
    #date { font-size: clamp(14px, 3vw, 16px); }
    #clock { font-size: clamp(20px, 4vw, 24px); font-family: 'Courier New', Courier, monospace; }
    #countdown { color: #667eea; font-size: clamp(14px, 3vw, 16px); white-space: nowrap; }
    .header-tools { display: flex; align-items: center; gap: 10px; position: relative; flex-wrap: wrap; justify-content: center; }
    .theme-switcher { display: flex; gap: 5px; }
    .theme-dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; border: 2px solid var(--text-color-secondary); }
    .control-icon { display: flex; align-items: center; justify-content: center; width: 35px; height: 35px; background: rgba(0,0,0,0.05); border-radius: 50%; color: var(--text-color-secondary); font-size: 16px; text-decoration: none; }
    
    .time-calculator-container { display: flex; align-items: center; gap: 6px; justify-content: center; background: var(--icon-bg); color: var(--text-color-primary); padding: 6px 8px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); flex-wrap: wrap; width: fit-content; }
    .time-calculator-container label { font-size: 12px; display: inline-flex; align-items: center; gap: 3px; }
    .time-calculator-container input[type="number"] { width: 35px; padding: 4px; font-size: 12px; border-radius: 6px; border: 1px solid var(--card-border-color); background-color: var(--bg-color); color: var(--text-color-primary); text-align: center; }
    #resultTime { font-family: 'Courier New', Courier, monospace; font-weight: bold; font-size: 13px; background: rgba(0,0,0,0.05); padding: 4px 8px; border-radius: 6px; min-width: 90px; text-align: center; }
    body.dark-theme #resultTime { background: rgba(255,255,255,0.1); }
    #resetCalcBtn { background: none; border: none; font-size: 14px; color: var(--text-color-secondary); cursor: pointer; padding: 5px; line-height: 1; }
    
    /* ★★ 追加: リフレッシュボタン ★★ */
    #refresh-btn { background: none; border: none; cursor: pointer; color: var(--text-color-secondary); padding: 5px; }
    .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    
    /* ★★ 変更: メイングリッドの比率 ★★ */
    .main-grid { display: grid; grid-template-columns: 3fr 1fr; grid-template-areas: "apps memo"; gap: 20px; margin-top: 20px; }
    .apps-area { grid-area: apps; }
    .memo-area { grid-area: memo; }

    .tab-container { background: var(--card-bg); box-shadow: var(--card-shadow); margin-top: 20px; border-radius: 20px; overflow: hidden; border: 1px solid var(--card-border-color); }
    .tab-menu { display: flex; align-items: center; overflow-x: auto; padding: 0 5px; scrollbar-width: none; -ms-overflow-style: none; }
    .tab-menu::-webkit-scrollbar { display: none; }
    .search-container { display: flex; align-items: center; padding: 0 10px; margin: 6px; background-color: var(--input-bg); border-radius: 16px; border: 1px solid rgba(0,0,0,0.1); }
    #appSearchInput { border: none; background: transparent; outline: none; padding: 8px 5px; font-size: 14px; width: 120px; color: var(--text-color-primary); }
    .tab-item { flex-shrink: 0; text-align: center; padding: 12px 15px; color: var(--text-color-secondary); text-decoration: none; font-weight: bold; font-size: 13px; transition: all 0.3s ease; border-radius: 16px; margin: 6px 3px; cursor: pointer; }
    .tab-item:hover { background-color: rgba(102, 126, 234, 0.1); color: #667eea; }
    .tab-item.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: var(--tab-active-text); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
    .sub-filter-tabs { display: flex; gap: 10px; padding: 10px; justify-content: center; flex-wrap: wrap; }
    .sub-filter-btn { background: var(--input-bg); color: var(--text-color-secondary); border: none; padding: 8px 16px; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 13px; }
    .sub-filter-btn.active { background: #667eea; color: white; }
    .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; padding: 10px; }
    .icon-item { text-align: center; width: auto; display: flex; flex-direction: column; align-items: center; }
    .icon-link { width: 60px; height: 60px; background-color: var(--icon-bg); border-radius: 20px; box-shadow: var(--icon-shadow); display: flex; align-items: center; justify-content: center; text-decoration: none; color: var(--text-color-primary); margin: 0 auto; transition: all 0.2s; }
    .icon-link:hover { transform: translateY(-3px); box-shadow: var(--icon-shadow); }
    .icon-link i { font-size: 28px; }
    .icon-img { width: 32px; height: 32px; border-radius: 8px; object-fit: contain; }
    .label-text { font-size: 12px; margin-top: 6px; color: var(--text-color-primary); line-height: 1.2; width: 100%; word-wrap: break-word; }
    #search-wrapper { user-select: none; position: relative; z-index: 1; border-radius: 15px; overflow: hidden; }
    #search-wrapper::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: url('IMAGE_0120.PNG'); background-size: cover; background-position: center center; background-attachment: fixed; opacity: 0.5; z-index: -1; }
    body.dark-theme #search-wrapper::before { opacity: 0.2; }
    .main-content{padding-top:10px}
    .memo-container { display: flex; flex-direction: column; height: 100%; background: var(--memo-bg); border-radius: 15px; border: 1px solid var(--memo-border); box-shadow: var(--card-shadow); backdrop-filter: blur(5px); }
    .memo-header { padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--memo-border); }
    .memo-header h3 { margin: 0; font-size: 16px; }
    .memo-header button { background: none; border: none; font-size: 16px; color: var(--text-color-secondary); cursor: pointer; }
    #memo-list { flex-grow: 1; padding: 10px; overflow-y: auto; list-style: none; margin: 0; }
    .memo-item { display: flex; align-items: center; gap: 10px; padding: 8px 5px; cursor: grab; }
    .memo-item input[type="checkbox"] { flex-shrink: 0; }
    .memo-item-text { flex-grow: 1; border: none; background: transparent; color: var(--text-color-primary); font-size: 14px; outline: none; }
    .memo-item-text.completed { text-decoration: line-through; color: var(--text-color-secondary); }
    #memo-new-item-input { width: 100%; box-sizing: border-box; border: none; border-top: 1px solid var(--memo-border); background: transparent; padding: 12px 15px; font-size: 14px; outline: none; color: var(--text-color-primary); }
    #memo-locked-view { display: flex; justify-content: center; align-items: center; height: 100%; }
    #unlock-memo-btn { padding: 10px 20px; font-size: 16px; font-weight: bold; background-color: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; }
    .hidden { display: none !important; }
    #status-container, #bustarain-container { display: none; margin-top: 20px; }
    
    /* 以下、BustarainとStatusのスタイルは省略 */
    .bus-display-board { background: var(--bus-board-bg); border: 3px solid #009900; border-radius: 15px; padding: 15px; box-shadow: var(--card-shadow); } .bus-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; } .bus-stop-name { font-size: clamp(18px, 5vw, 22px); font-weight: bold; color: #009900; } .direction-controls { display: flex; gap: 8px; } .direction-button { background-color: rgba(255,255,255,0.5); border: 2px solid #333; padding: 6px 10px; font-size: 13px; font-weight: bold; cursor: pointer; border-radius: 8px; color: #333; } .schedule-type { font-size: 13px; color: #009900; font-weight: bold; background-color: var(--icon-bg); padding: 4px 8px; border-radius: 8px; border: 2px solid #009900; } #justDepartedSection { margin-bottom: 15px; } .just-departed-info { font-size: 12px; color: #444; background-color: #e0e0e0; padding: 5px 10px; margin: 0 auto 5px; border: 1px solid #ccc; border-radius: 8px; text-align: center; } .departures-container { display: grid; gap: 15px; } .bus-card { background-color: var(--bus-card-bg); border-radius: 12px; padding: 15px; display: flex; align-items: center; justify-content: space-between; border: 2px solid #009900; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; } .bus-card__label { position: absolute; top: -12px; left: 10px; background: #009900; color: white; padding: 2px 8px; font-size: 12px; font-weight: bold; border-radius: 5px; } .bus-card__main { display: flex; align-items: center; gap: 15px; } .bus-card__time { font-size: clamp(28px, 8vw, 40px); font-weight: bold; color: #cc0000; font-family: 'Courier New', monospace; } .bus-card__details { display: flex; flex-direction: column; gap: 4px; } .bus-card__route { font-size: clamp(14px, 4vw, 16px); font-weight: bold; display: flex; align-items: center; gap: 8px; } .route-number { padding: 1px 6px; font-size: 13px; } .itayado-arrival { font-size: 12px; } .bus-card__side { text-align: right; } .bus-card__remaining { font-size: clamp(18px, 5vw, 24px); font-weight: bold; color: #009900; margin-bottom: 8px; } .other-statuses { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; } .status-card { background: var(--card-bg); border-radius: 15px; padding: 15px; box-shadow: var(--card-shadow); } .status-card-title { font-size: 16px; font-weight: bold; margin: 0 0 10px 0; } .iframe-container { width: 100%; height: 200px; border-radius: 10px; overflow: hidden; } .iframe-container iframe { width: 100%; height: 100%; border: none; } .sub-tab-menu { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid var(--memo-border); padding-bottom: 10px; flex-wrap: wrap; } .sub-tab-btn { background: var(--input-bg); color: var(--text-color-secondary); border: none; padding: 10px 15px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 13px; } .sub-tab-btn.active { background: #667eea; color: white; } .accordion-item { border: 1px solid var(--memo-border); border-radius: 8px; margin-bottom: 10px; overflow: hidden; } .accordion-header { background: var(--card-bg); padding: 15px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: clamp(14px, 4vw, 16px); } .accordion-header .fas { transition: transform 0.3s ease; } .accordion-item.active .accordion-header .fas { transform: rotate(180deg); } .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease, padding 0.3s ease; padding: 0 15px; } .accordion-item.active .accordion-content { max-height: 1200px; padding: 15px 0; } .placeholder-content { color: var(--text-color-secondary); padding: 0 15px; } .accordion-iframe { width: 100%; height: 800px; border: none; } .iframe-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; } .iframe-grid iframe { height: 600px; }

    /* スマートフォン向けレイアウト */
    @media (max-width: 1024px) {
      .main-grid { grid-template-columns: 1fr; grid-template-areas: "apps" "memo"; }
      .memo-area { min-height: 250px; }
      .iframe-grid { grid-template-columns: 1fr; }
      .header-area { flex-direction: column; }
    }
  </style>
</head>
<body>
  
  <div class="page-container">
    <header class="header-area">
      <div class="clock-wrapper">
        <div class="datetime-row">
          <div id="date"></div>
          <div id="clock"></div>
          <div id="countdown"></div>
        </div>
        <div class="time-calculator-container">
          <i class="fas fa-calculator"></i>
          <label>+ <input id="addHours" type="number" min="0" value="0"> H</label>
          <label><input id="addMinutes" type="number" min="0" value="0"> M</label>
          <label><input id="addSeconds" type="number" min="0" value="0"> S</label>
          <span id="resultTime"></span>
          <button id="resetCalcBtn" title="リセット"><i class="fas fa-history"></i></button>
          <!-- ★★ 追加: リフレッシュボタン ★★ -->
          <button id="refresh-btn" title="リフレッシュ" onclick="location.reload()">
            <span class="material-symbols-outlined">refresh</span>
          </button>
        </div>
      </div>
      <div class="header-controls">
        <div class="theme-switcher">
          <div class="theme-dot light" onclick="setTheme('light')"></div>
          <div class="theme-dot dark" onclick="setTheme('dark')"></div>
        </div>
        <a href="https://sites.google.com/view/foretsy/管理者ページ" class="control-icon"> <i class="fas fa-cog"></i> </a>
        <a href="https://sites.google.com/view/foretsy/裂け目" class="control-icon"> <i class="fas fa-route"></i> </a>
      </div>
    </header>

    <div class="tab-container">
      <div class="tab-menu">
        <div class="search-container"> <i class="fas fa-search"></i> <input type="text" id="appSearchInput" placeholder="検索..."> </div>
        <div class="tab-item" id="tab-all-apps" onclick="activateTab('all-apps')"> <i class="fas fa-th-large"></i> All Apps </div>
        <div class="tab-item" id="tab-status" onclick="activateTab('status')"> <i class="fas fa-chart-line"></i> Status </div>
        <div class="tab-item" id="tab-bustarain" onclick="activateTab('bustarain')"> <i class="fas fa-bus"></i> Bustarain </div>
      </div>
    </div>

    <div class="main-grid" id="main-grid">
      <div class="apps-area">
        <div id="search-wrapper">
          <div class="main-content" id="mainContent">
            <div class="sub-filter-tabs" id="sub-filter-tabs">
                <button class="sub-filter-btn active" data-category="all">All</button>
                <button class="sub-filter-btn" data-category="google">Google</button>
                <button class="sub-filter-btn" data-category="sns">SNS</button>
                <button class="sub-filter-btn" data-category="downloader">Downloader</button>
            </div>
            <div class="grid-container" id="gridContainer">
              <!-- アイコンリスト -->
              <div class="icon-item search-item" data-category="google" data-search-text="Google グーグル"><a href="https://www.google.com" class="icon-link"> <img src="https://www.google.com/favicon.ico" class="icon-img" alt="Google"> </a><div class="label-text">Google</div></div><div class="icon-item search-item" data-category="google" data-search-text="Gmail Google Mail メール"><a href="https://mail.google.com" class="icon-link"> <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" class="icon-img" alt="Gmail"> </a><div class="label-text">Gmail</div></div><div class="icon-item search-item" data-category="google" data-search-text="Google Calendar カレンダー"><a href="https://calendar.google.com" class="icon-link"> <img src="https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_3_2x.png" class="icon-img" alt="Calendar"> </a><div class="label-text">Calendar</div></div><div class="icon-item search-item" data-category="google" data-search-text="Google Photos フォト 写真"><a href="https://photos.google.com" class="icon-link"> <img src="https://ssl.gstatic.com/images/branding/product/1x/photos_48dp.png" class="icon-img" alt="Photos"> </a><div class="label-text">Photos</div></div><div class="icon-item search-item" data-category="google" data-search-text="Google Drive ドライブ"><a href="https://drive.google.com" class="icon-link"> <img src="https://ssl.gstatic.com/images/branding/product/2x/drive_2020q4_48dp.png" class="icon-img" alt="Drive"> </a><div class="label-text">Drive</div></div><div class="icon-item search-item" data-category="other" data-search-text="Yahoo! ヤフー"> <a href="https://www.yahoo.co.jp" class="icon-link"> <img src="https://www.yahoo.co.jp/favicon.ico" class="icon-img" alt="Yahoo!"> </a> <div class="label-text">Yahoo!</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="X Twitter ツイッター"> <a href="https://x.com/i/timeline" class="icon-link"> <img src="https://twitter.com/favicon.ico" class="icon-img" alt="X"> </a> <div class="label-text">X</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="Instagram インスタグラム"> <a href="https://www.instagram.com" class="icon-link"> <img src="https://static.cdninstagram.com/rsrc.php/v3/yI/r/VsNE-OHk_8a.png" class="icon-img" alt="Instagram"> </a> <div class="label-text">Instagram</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="YouTube ユーチューブ"> <a href="https://www.youtube.com/feed/subscriptions" class="icon-link"> <img src="https://www.youtube.com/favicon.ico" class="icon-img" alt="YouTube"> </a> <div class="label-text">YouTube</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="YT Shorts YouTube ショート"> <a href="https://www.youtube.com/feed/subscriptions/shorts" class="icon-link"> <i class="fab fa-youtube" style="color: #ff0000;"></i> </a> <div class="label-text">YT Shorts</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Remote It リモート"> <a href="https://app.remote.it" class="icon-link"> <i class="fas fa-desktop" style="color: #4285f4;"></i> </a> <div class="label-text">Remote It</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="TikTok ティックトック"> <a href="https://www.tiktok.com" class="icon-link"> <img src="https://www.tiktok.com/favicon.ico" class="icon-img" alt="TikTok"> </a> <div class="label-text">TikTok</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="Twitch ツイッチ"> <a href="https://www.twitch.tv" class="icon-link"> <img src="https://www.twitch.tv/favicon.ico" class="icon-img" alt="Twitch"> </a> <div class="label-text">Twitch</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Abema アベマ"> <a href="https://abema.tv/" class="icon-link"> <img src="https://abema.tv/favicon.ico" class="icon-img" alt="Abema"> </a> <div class="label-text">Abema</div> </div><div class="icon-item search-item" data-category="sns" data-search-text="Discord ディスコード"> <a href="https://discord.com/channels/@me" class="icon-link"> <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a69f118df70ad7828d4_icon_clyde_blurple_RGB.svg" class="icon-img" alt="Discord"> </a> <div class="label-text">Discord</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Spotify スポティファイ"> <a href="https://open.spotify.com/intl-ja" class="icon-link"> <img src="https://open.spotify.com/favicon.ico" class="icon-img" alt="Spotify"> </a> <div class="label-text">Spotify</div> </div><div class="icon-item search-item" data-category="downloader" data-search-text="y2mate ダウンロード"><a href="https://www-y2mate.com/ja23/" class="icon-link"><i class="fab fa-youtube" style="color: #c4302b;"></i></a><div class="label-text">Y2mate</div></div><div class="icon-item search-item" data-category="downloader" data-search-text="Spotify Downloader ダウンロード"><a href="https://spotidownloader.com/jp" class="icon-link"><i class="fab fa-spotify" style="color: #1DB954;"></i></a><div class="label-text">SpotiDown</div></div><div class="icon-item search-item" data-category="downloader" data-search-text="Spotify mate ダウンロード"><a href="https://spotimate.io/" class="icon-link"><i class="fas fa-music" style="color: #1DB954;"></i></a><div class="label-text">SpotiMate</div></div><div class="icon-item search-item" data-category="other" data-search-text="神戸市交通局 地下鉄 バス"> <a href="https://kotsu.city.kobe.lg.jp/" class="icon-link"> <i class="fas fa-subway" style="color: #0066cc;"></i> </a> <div class="label-text">神戸市交通局</div> </div><div class="icon-item search-item" data-category="other" data-search-text="GigaFile ギガファイル便"> <a href="https://gigafile.nu/" class="icon-link"> <img src="https://gigafile.nu/favicon.ico" class="icon-img" alt="GigaFile便"> </a> <div class="label-text">GigaFile</div> </div><div class="icon-item search-item" data-category="other" data-search-text="ChatGPT AI"> <a href="https://chatgpt.com" class="icon-link"> <img src="https://chat.openai.com/favicon.ico" class="icon-img" alt="ChatGPT"> </a> <div class="label-text">ChatGPT</div> </div><div class="icon-item search-item" data-category="google" data-search-text="Google AI Gemini"> <a href="https://aistudio.google.com/prompts/new_chat" class="icon-link"> <i class="fas fa-brain" style="color: #4285f4;"></i> </a> <div class="label-text">Google AI</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Claude AI クロード"> <a href="https://claude.ai" class="icon-link"> <img src="https://claude.ai/favicon.ico" class="icon-img" alt="Claude AI"> </a> <div class="label-text">Claude AI</div> </div><div class="icon-item search-item" data-category="other" data-search-text="BUSTARAIN バスタレイン"> <a href="https://sites.google.com/view/bustar/home" class="icon-link bustarain-icon"> <i class="fas fa-bus"></i> </a> <div class="label-text">BUSTARAIN</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Answer I アンサー"> <a href="https://sites.google.com/view/answer-i/home" class="icon-link answer-i-icon"> <i class="fas fa-question-circle"></i> </a> <div class="label-text">Answer I</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Rawkuro ブルーロック 漫画"> <a href="https://rawkuro.net/manga/bururokku004/di285hua" class="icon-link"> <i class="fas fa-futbol" style="color: #1e90ff;"></i> </a> <div class="label-text">Rawkuro</div> </div><div class="icon-item search-item" data-category="other" data-search-text="MN4U ブルーロック 漫画"> <a href="https://mn4u.net/tgm-84/" class="icon-link"> <img src="https://mn4u.net/favicon.ico" class="icon-img" alt="MN4U"> </a> <div class="label-text">MN4U</div> </div><div class="icon-item search-item" data-category="other" data-search-text="講談社 ブルーロック 漫画"> <a href="https://kmanga.kodansha.com/title/10008/episode/360423" class="icon-link"> <img src="https://kmanga.kodansha.com/favicon.ico" class="icon-img" alt="講談社"> </a> <div class="label-text">講談社</div> </div><div class="icon-item search-item" data-category="other" data-search-text="メルカリ フリマ"> <a href="https://www.mercari.com/jp/" class="icon-link"> <img src="https://mercari.com/favicon.ico" class="icon-img" alt="メルカリ"> </a> <div class="label-text">メルカリ</div> </div><div class="icon-item search-item" data-category="other" data-search-text="Yahoo!フリマ ヤフー"> <a href="https://paypayfleamarket.yahoo.co.jp/" class="icon-link"> <img src="https://paypayfleamarket.yahoo.co.jp/favicon.ico" class="icon-img" alt="Yahoo!フリマ"> </a> <div class="label-text">Yahoo!フリマ</div> </div><div class="icon-item search-item" data-category="other" data-search-text="ヤマト運輸 宅急便"> <a href="https://www.kuronekoyamato.co.jp/" class="icon-link"> <i class="fas fa-truck" style="color: #00a54f;"></i> </a> <div class="label-text">ヤマト運輸</div> </div><div class="icon-item search-item" data-category="google" data-search-text="Google Sites サイト作成"> <a href="https://sites.google.com/new" class="icon-link"> <i class="fas fa-palette" style="color: #4285f4;"></i> </a> <div class="label-text">Google Sites</div> </div><div class="icon-item search-item" data-category="other" data-search-text="GitHub ギットハブ"> <a href="https://github.com" class="icon-link"> <i class="fab fa-github" style="color: #181717;"></i> </a> <div class="label-text">GitHub</div> </div>
            </div>
          </div>
        </div>
      </div>
      <aside class="memo-area">
        <div class="memo-container">
          <div id="memo-unlocked-view" class="hidden">
            <div class="memo-header">
              <h3><i class="fas fa-list-check"></i> Checklist</h3>
              <div>
                <button id="clear-checked-btn" title="チェック済みを削除"><i class="fas fa-trash"></i></button>
                <button id="lock-memo-btn" title="ロックして新規パスワード設定"><i class="fas fa-lock"></i></button>
              </div>
            </div>
            <ul id="memo-list"></ul>
            <input type="text" id="memo-new-item-input" placeholder="新規項目を追加 (Enter)">
          </div>
          <div id="memo-locked-view">
            <button id="unlock-memo-btn"><i class="fas fa-lock"></i> メモを解除</button>
          </div>
        </div>
      </aside>
    </div>
    
    <div id="status-container">
        <div class="other-statuses">
            <div class="status-card">
                <h3 class="status-card-title">Game Status</h3>
                <div class="game-buttons">
                    <a href="https://apexlegendsstatus.com/current-map" class="game-button apex"> <i class="fas fa-crosshairs"></i> Apex Legends </a>
                    <a href="https://www.splatoon3-schedule.net" class="game-button splatoon"> <i class="fas fa-paint-brush"></i> Splatoon 3 </a>
                </div>
            </div>
            <div class="status-card">
                <h3 class="status-card-title">回線速度テスト</h3>
                <div class="iframe-container"><iframe src="https://fast.com/ja/" title="速度テスト"></iframe></div>
            </div>
            <div class="status-card">
                <h3 class="status-card-title">兵庫県警報・注意報</h3>
                <div class="iframe-container"><iframe src="https://weathernews.jp/onebox/warn/hyogo/2810000/" title="ウェザーニュース警報・注意報"></iframe></div>
            </div>
        </div>
    </div>

    <div id="bustarain-container">
        <div class="sub-tab-menu">
            <button class="sub-tab-btn active" data-target="train-content"><i class="fas fa-train"></i> Train</button>
            <button class="sub-tab-btn" data-target="bus-content"><i class="fas fa-bus"></i> BUS</button>
            <button class="sub-tab-btn" data-target="other-content"><i class="fas fa-info-circle"></i> その他</button>
        </div>
        <div id="train-content" class="sub-tab-content">
            <div class="accordion-item"><div class="accordion-header" data-src="train/wadmisaki-train.html">和田岬 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="train/itayado-train.html">帰）板宿新長田経由海岸線 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="train/Itayado-sannyou.html">板宿駅（山陽電車） <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        </div>
        <div id="bus-content" class="sub-tab-content hidden">
            <div class="accordion-item"><div class="accordion-header" data-src="bus/iki-kaeri.html">行き・帰り（今出在家 ⇔ 鷹取団地）<i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/imadezaike.html">今出在家 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/yumeno3.html">夢野町3丁目 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/takatoridantimae.html">高取団地前 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
            <div class="accordion-item"><div class="accordion-header" data-src="bus/Itayado-bus.html">板宿駅 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        </div>
        <div id="other-content" class="sub-tab-content hidden">
            <iframe class="accordion-iframe" src="https://www.noevir-stadium.jp/event/" style="height: 1000px;"></iframe>
        </div>
    </div>
  </div>
  
  <script>
    const schedule=[{name:"1限",start:"08:50",end:"09:40"},{name:"休憩",start:"09:40",end:"09:50"},{name:"2限",start:"09:50",end:"10:40"},{name:"休憩",start:"10:40",end:"10:50"},{name:"3限",start:"10:50",end:"11:40"},{name:"休憩",start:"11:40",end:"11:50"},{name:"4限",start:"11:50",end:"12:40"},{name:"昼休み",start:"12:40",end:"13:20"},{name:"5限",start:"13:20",end:"14:10"},{name:"休憩",start:"14:10",end:"14:20"},{name:"6限",start:"14:20",end:"15:10"},{name:"休憩",start:"15:10",end:"15:20"},{name:"7限",start:"15:20",end:"16:10"},{name:"休憩",start:"16:10",end:"16:40"},{name:"8限",start:"16:40",end:"17:30"},{name:"休憩",start:"17:30",end:"17:40"},{name:"9限",start:"17:40",end:"18:30"}];
    const mainGrid = document.getElementById('main-grid');
    const statusContainer = document.getElementById('status-container');
    const bustarainContainer = document.getElementById('bustarain-container');

    function parseTimeToDate(t){const[e,n]=t.split(":").map(Number),o=new Date;return o.setHours(e,n,0,0),o}
    function getCurrentPeriod(t){for(const e of schedule){const n=parseTimeToDate(e.start),o=parseTimeToDate(e.end);if(t>=n&&t<o)return{...e,startTime:n,endTime:o}}return null}
    function updateCountdown(t){const e=getCurrentPeriod(t),n=document.getElementById("countdown");if(e){const o=e.endTime-t,a=e.endTime-e.startTime,s=a-o,r=Math.floor(s/a*100),i=Math.floor(o/1e3),l=String(Math.floor(i/3600)).padStart(2,"0"),c=String(Math.floor(i%3600/60)).padStart(2,"0"),d=String(i%60).padStart(2,"0");n.textContent=`${e.name} 残り: ${l}:${c}:${d} (${r}%)`,document.title=`ZeroHop | ${e.name} ${l}:${c}:${d}`}else n.textContent="現在は授業時間外です",document.title="ZeroHop"}
    function updateClockAndDate(){const t=new Date,e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");document.getElementById("clock").textContent=`${e}:${n}:${o}`;const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=["日","月","火","水","木","金","土"][t.getDay()];document.getElementById("date").textContent=`${a}/${s}/${r}(${i})`,updateCountdown(t)}
    function setTheme(t){"dark"===t?(document.body.classList.add("dark-theme"),localStorage.setItem("siteTheme","dark")):(document.body.classList.remove("dark-theme"),localStorage.setItem("siteTheme","light"))}
    
    function activateTab(tabId) {
        document.querySelectorAll(".tab-item").forEach(t => t.classList.remove('active'));
        const activeTabElement = document.getElementById(`tab-${tabId}`);
        if(activeTabElement) activeTabElement.classList.add('active');
        
        mainGrid.style.display = 'none';
        statusContainer.style.display = 'none';
        bustarainContainer.style.display = 'none';

        if (tabId === 'status') {
            statusContainer.style.display = 'flex';
        } else if (tabId === 'bustarain') {
            bustarainContainer.style.display = 'block';
        } else { // all-apps
            mainGrid.style.display = 'grid';
            filterIconsByCategory(localStorage.getItem('siteActiveSubFilter') || 'all');
        }
        localStorage.setItem('siteActiveTab', tabId);
    }

    function filterIconsByCategory(category) {
        document.querySelectorAll(".sub-filter-btn").forEach(btn => {
            btn.classList.toggle('active', btn.dataset.category === category);
        });
        document.querySelectorAll(".icon-item").forEach(icon => {
            if (category === 'all' || icon.dataset.category === category) {
                icon.style.display = 'flex';
            } else {
                icon.style.display = 'none';
            }
        });
        localStorage.setItem('siteActiveSubFilter', category);
    }

    function filterContent(){const t=document.getElementById("appSearchInput").value.toLowerCase();document.querySelectorAll(".icon-item").forEach(e=>{const n=e.dataset.searchText.toLowerCase().includes(t);e.style.display=n?"flex":"none"})}
    
    function pad(n){return String(n).padStart(2,'0');}
    function calcTime() { const now = new Date(); const addH = +document.getElementById('addHours').value || 0; const addM = +document.getElementById('addMinutes').value || 0; const addS = +document.getElementById('addSeconds').value || 0; const resultDate = new Date(now.getTime() + (addH * 3600 + addM * 60 + addS) * 1000); const h = pad(resultDate.getHours()), m = pad(resultDate.getMinutes()), s = pad(resultDate.getSeconds()); const startOfToday = new Date(); startOfToday.setHours(0, 0, 0, 0); const startOfResultDay = new Date(resultDate); startOfResultDay.setHours(0, 0, 0, 0); const dayDiff = Math.round((startOfResultDay - startOfToday) / 86400000); let dayText = dayDiff > 0 ? ` (+${dayDiff}d)` : ''; document.getElementById('resultTime').textContent = `${h}:${m}:${s}${dayText}`; }
    function resetCalc() { document.getElementById('addHours').value = 0; document.getElementById('addMinutes').value = 0; document.getElementById('addSeconds').value = 0; calcTime(); }
    
    const memoUnlockedView = document.getElementById('memo-unlocked-view'), memoLockedView = document.getElementById('memo-locked-view'), lockBtn = document.getElementById('lock-memo-btn'), unlockBtn = document.getElementById('unlock-memo-btn'), memoList = document.getElementById('memo-list'), newItemInput = document.getElementById('memo-new-item-input'), clearCheckedBtn = document.getElementById('clear-checked-btn');
    let isMemoLocked = localStorage.getItem('isMemoLocked') !== 'false';
    const hashString = s => { let h = 0; for(let i = 0; i < s.length; i++) h = Math.imul(31, h) + s.charCodeAt(i) | 0; return h; };
    function updateMemoView() { if (isMemoLocked) { memoUnlockedView.classList.add('hidden'); memoLockedView.classList.remove('hidden'); } else { memoUnlockedView.classList.remove('hidden'); memoLockedView.classList.add('hidden'); renderMemoList(); } localStorage.setItem('isMemoLocked', isMemoLocked); }
    function getMemoData() { try { return JSON.parse(localStorage.getItem('memoData')) || []; } catch (e) { return []; } }
    function saveMemoData(data) { localStorage.setItem('memoData', JSON.stringify(data)); }
    function renderMemoList() { memoList.innerHTML = ''; getMemoData().forEach((item, index) => { const li = document.createElement('li'); li.className = 'memo-item'; li.dataset.index = index; li.draggable = true; const checkbox = document.createElement('input'); checkbox.type = 'checkbox'; checkbox.checked = item.completed; checkbox.onchange = () => { item.completed = checkbox.checked; saveAndRender(); }; const textInput = document.createElement('input'); textInput.type = 'text'; textInput.value = item.text; textInput.className = 'memo-item-text'; if (item.completed) textInput.classList.add('completed'); textInput.oninput = () => { item.text = textInput.value; saveMemoData(getMemoData()); }; textInput.onkeydown = (e) => { if (e.key === 'Enter') e.preventDefault(); }; li.appendChild(checkbox); li.appendChild(textInput); memoList.appendChild(li); }); }
    function saveAndRender() { saveMemoData(getMemoData().map((item, i) => { const li = memoList.children[i]; return { text: li.querySelector('.memo-item-text').value, completed: li.querySelector('input[type="checkbox"]').checked }; })); renderMemoList(); }
    newItemInput.onkeydown = (e) => { if (e.key === 'Enter' && newItemInput.value.trim() !== '') { const data = getMemoData(); data.push({ text: newItemInput.value.trim(), completed: false }); newItemInput.value = ''; saveMemoData(data); renderMemoList(); } };
    clearCheckedBtn.onclick = () => { if (confirm('チェック済みの項目をすべて削除しますか？')) { saveMemoData(getMemoData().filter(item => !item.completed)); renderMemoList(); } };
    let dragSrcEl = null;
    memoList.addEventListener('dragstart', (e) => { dragSrcEl = e.target; e.target.classList.add('dragging'); });
    memoList.addEventListener('dragover', (e) => { e.preventDefault(); const target = e.target.closest('.memo-item'); if (target && target !== dragSrcEl) { memoList.insertBefore(dragSrcEl, target.nextSibling || target); } });
    memoList.addEventListener('dragend', (e) => { e.target.classList.remove('dragging'); saveAndRender(); });
    function unlockMemo() { const storedHash = localStorage.getItem('memoPasswordHash'); if (!storedHash) { isMemoLocked = false; updateMemoView(); return; } const password = prompt('パスワードを入力:'); if (password !== null && hashString(password).toString() === storedHash) { isMemoLocked = false; updateMemoView(); } else if (password !== null) { alert('パスワードが違います。'); } }
    function lockMemo() { const newPassword = prompt('新しいパスワードを設定 (空でパスワード解除):'); if (newPassword !== null) { newPassword ? localStorage.setItem('memoPasswordHash', hashString(newPassword)) : localStorage.removeItem('memoPasswordHash'); isMemoLocked = true; updateMemoView(); alert('メモをロックしました。'); } }
    
    // ★★ 変更: アコーディオンのロジック ★★
    function initAccordions() {
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const item = header.parentElement;
                const wasActive = item.classList.contains('active');

                // 全てのアコーディオンを一旦閉じる
                header.closest('.sub-tab-content').querySelectorAll('.accordion-item').forEach(otherItem => {
                    otherItem.classList.remove('active');
                });
                
                // もしクリックしたものが閉じていた状態なら、開く
                if (!wasActive) {
                    item.classList.add('active');
                    const content = header.nextElementSibling;
                    const src = header.dataset.src;
                    if (src && content.innerHTML.trim() === '') {
                        const iframe = document.createElement('iframe');
                        iframe.className = 'accordion-iframe';
                        iframe.src = src;
                        content.appendChild(iframe);
                    }
                }
            });
        });
    }
    
    function activateSubTab(targetId) {
        document.querySelectorAll('.sub-tab-content').forEach(content => content.classList.add('hidden'));
        document.getElementById(targetId).classList.remove('hidden');
        document.querySelectorAll('.sub-tab-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.target === targetId));
    }

    function init() {
      const savedTheme = localStorage.getItem('siteTheme') || 'light';
      setTheme(savedTheme);
      const savedTab = localStorage.getItem('siteActiveTab') || 'all-apps';
      activateTab(savedTab);
      updateClockAndDate(); 
      resetCalc();
      
      updateMemoView();
      lockBtn.addEventListener('click', lockMemo);
      unlockBtn.addEventListener('click', unlockMemo);
      document.getElementById('appSearchInput').addEventListener('input', filterContent);
      
      ['addHours', 'addMinutes', 'addSeconds'].forEach(id => { document.getElementById(id).addEventListener('input', calcTime); });
      document.getElementById('resetCalcBtn').addEventListener('click', resetCalc);
      
      initAccordions();
      document.querySelectorAll('.sub-tab-btn').forEach(btn => {
        btn.addEventListener('click', () => activateSubTab(btn.dataset.target));
      });
      activateSubTab('train-content');
      
      document.querySelectorAll('.sub-filter-btn').forEach(btn => {
        btn.addEventListener('click', () => filterIconsByCategory(btn.dataset.category));
      });
      
      // 全てのリンクを新しいタブで開くように設定
      document.querySelectorAll('a').forEach(link => {
          link.target = "_blank";
      });
    }
    
    setInterval(() => { 
        updateClockAndDate(); 
        calcTime();
    }, 1000); 
    
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
