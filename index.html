<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Link First</title>
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" sizes="180x180">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" />
  <link rel="stylesheet" href="style.css">
  
  <style>
    /* --- 既存のスタイル --- */
    .label-text { font-weight: 700 !important; }
    .hidden { display: none !important; }

    /* 検索コンテナの基本スタイル */
    .search-container {
        position: relative;
        display: flex;
        align-items: center;
        background: #fff;
        border-radius: 20px;
        padding: 5px 10px;
        border: 1px solid #ccc;
        flex-grow: 1;
        max-width: 400px;
        transition: background 0.3s, border-color 0.3s; /* 色変化を滑らかに */
    }
    .search-container i.fa-search { color: #888; margin-right: 8px; }
    #appSearchInput {
        border: none;
        outline: none;
        width: 100%;
        font-size: 16px;
        background: transparent;
        padding-right: 30px;
        height: 30px;
        color: #333; /* ライトモードの文字色 */
    }
    #clearSearchBtn {
        position: absolute;
        right: 10px;
        color: #999;
        cursor: pointer;
        font-size: 16px;
        padding: 5px;
        z-index: 2;
    }
    #clearSearchBtn:hover { color: #333; }

    /* ▼▼▼ 追加：検索ボックスのダークモード対応 ▼▼▼ */
    body.dark-theme .search-container {
        background: #333; /* 暗い背景 */
        border-color: #555;
    }
    body.dark-theme #appSearchInput {
        color: #eee; /* 白っぽい文字 */
    }
    body.dark-theme .search-container i.fa-search,
    body.dark-theme #clearSearchBtn {
        color: #aaa; /* アイコンも少し明るく */
    }
    body.dark-theme #clearSearchBtn:hover {
        color: #fff;
    }
    /* プレースホルダーの色も調整 */
    body.dark-theme #appSearchInput::placeholder {
        color: #777;
    }

    /* ▼▼▼ 追加：カレンダー表示用のスタイル ▼▼▼ */
    #calendar-container {
        width: 100%;
        display: none; /* JSで制御 */
        justify-content: center;
        padding: 20px;
        box-sizing: border-box;
        background: transparent;
    }
    /* iframeがスマホからはみ出さないように調整 */
    #calendar-container iframe {
        max-width: 100%; 
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        border-radius: 8px;
        background: #fff; /* カレンダーの読み込み中の背景 */
    }

    /* スマホ向け最適化 */
    @media (max-width: 768px) {
        .tab-menu { flex-wrap: wrap; gap: 10px; padding: 10px; }
        .search-container { order: -1; width: 100%; max-width: 100%; margin-bottom: 5px; height: 44px; }
        .tab-item { flex-grow: 1; text-align: center; justify-content: center; font-size: 14px; padding: 10px 5px; }
        
        #calendar-container {
            padding: 5px; /* スマホでは余白を減らす */
        }
    }
  </style>
</head>
<body>
  <div class="page-container">
    <header class="header-area">
      <div class="clock-area">
        <div class="clock-main-row">
            <div class="clock-content-wrapper">
              <div class="datetime-row">
                <div id="date"></div>
                <div id="clock"></div>
                <div id="countdown"></div>
                <div id="offline-status"></div>
                <div class="header-speed-test">
                    <iframe data-src="https://fast.com/ja/" title="速度テスト" loading="lazy"></iframe>
                    <div class="control-icon" id="speed-test-refresh-button" title="速度テストを再実行">
                       <i class="fas fa-redo"></i> 
                    </div>
                </div>
                <div class="theme-switcher">
                  <div class="theme-dot light" onclick="setTheme('light')"></div>
                  <div class="theme-dot dark" onclick="setTheme('dark')"></div>
                </div>
              </div>
            </div>
            <div class="header-controls">
              <div class="control-icon" id="refresh-button" title="ページを再読み込み">
                 <i class="fas fa-sync-alt"></i> 
              </div>
            </div>
        </div>
    </div>
</header>
<div class="tab-container">
  <div class="tab-menu">
    <div class="search-container"> 
        <i class="fas fa-search"></i> 
        <input type="text" id="appSearchInput" placeholder="検索..."> 
        <i class="fas fa-times hidden" id="clearSearchBtn"></i>
    </div>
    
    <div class="tab-item" id="tab-all-apps" onclick="activateTab('all-apps')"> <i class="fas fa-th-large"></i> Apps </div>
    <!-- ▼▼▼ 追加：Calendarタブ ▼▼▼ -->
    <div class="tab-item" id="tab-calendar" onclick="activateTab('calendar')"> <i class="far fa-calendar-alt"></i> Calendar </div>
    
    <div class="tab-item" id="tab-bustarain" onclick="activateTab('bustarain')"> <i class="fas fa-bus"></i> Bustarain </div>
    <a href="https://sites.google.com/view/answer-i/all-home" class="tab-item" target="_blank"> <i class="fas fa-robot"></i> Answer I </a>
    <a href="https://discord.com/channels/@me" class="tab-item" target="_blank" title="Discord" style="padding-left: 16px; padding-right: 16px; min-width: 0;"><i class="fab fa-discord"></i></a>
  </div>
</div>

<!-- Main Apps Grid -->
<div class="main-grid" id="main-grid">
  <div class="apps-area">
    <div id="search-wrapper">
      <div class="main-content" id="mainContent">
        <div id="recently-used-apps-container" class="hidden">
            <h3 class="section-title">最近使用したアプリ</h3>
            <div class="grid-container" id="recentlyUsedGridContainer"></div>
        </div>
        <hr id="section-divider" class="hidden">
        <div id="all-apps-container">
            <h3 class="section-title">すべてのアプリ</h3>
            <div class="sub-filter-tabs" id="sub-filter-tabs">
                <button class="sub-filter-btn active" data-category="all">All</button>
                <button class="sub-filter-btn" data-category="favorite">Favorite</button>
                <button class="sub-filter-btn" data-category="ai">AI</button>
                <button class="sub-filter-btn" data-category="google">Google</button>
                <button class="sub-filter-btn" data-category="sns">SNS</button>
                <button class="sub-filter-btn" data-category="game">Game</button>
                <button class="sub-filter-btn" data-category="downloader">Downloader</button>
                <button class="sub-filter-btn" data-category="other">Other</button>
            </div>
            <div class="grid-container" id="gridContainer"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ▼▼▼ 追加：Calendar Container ▼▼▼ -->
<div id="calendar-container">
    <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=Asia%2FTokyo&showTitle=0&src=dGFnZnlrQGdtYWlsLmNvbQ&src=bW9yaS55dXV0bzAxMzBAZ21haWwuY29t&src=amEuamFwYW5lc2UjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%23039be5&color=%239e69af&color=%230b8043" style="border-width:0" width="1000" height="600" frameborder="0" scrolling="no"></iframe>
</div>

<!-- Bustarain Container -->
<div id="bustarain-container">
    <div class="sub-tab-menu">
        <button class="sub-tab-btn active" data-target="train-content"><i class="fas fa-train"></i> Train</button>
        <button class="sub-tab-btn" data-target="bus-content"><i class="fas fa-bus"></i> BUS</button>
        <button class="sub-tab-btn" data-target="other-content"><i class="fas fa-info-circle"></i> その他</button>
    </div>
    <div id="train-content" class="sub-tab-content">
        <div class="accordion-item"><div class="accordion-header" data-src="train/wadmisaki-train.html">和田岬 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="train/itayado-train.html">帰）板宿新長田経由海岸線 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="train/Itayado-sannyou.html">板宿駅（山陽電車） <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
    </div>
    <div id="bus-content" class="sub-tab-content hidden">
        <div class="accordion-item"><div class="accordion-header" data-src="bus/Buslocation.html">バスロケーション <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="bus/iki-kaeri.html">行き・帰り（今出在家 ⇔ 鷹取団地）<i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="bus/imadezaike.html">今出在家 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="bus/yumeno3.html">夢野町3丁目 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="bus/takatoridantimae.html">高取団地前 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
        <div class="accordion-item"><div class="accordion-header" data-src="bus/Itayado-bus.html">板宿駅 <i class="fas fa-chevron-down"></i></div><div class="accordion-content"></div></div>
    </div>
    <div id="other-content" class="sub-tab-content hidden">
        <iframe class="accordion-iframe" data-src="https://www.noevir-stadium.jp/event/" style="height: 1000px;" loading="lazy"></iframe>
    </div>
</div>
  <div id="iframe-modal" class="modal-overlay hidden">
    <div class="modal-content iframe-modal-content">
      <button class="close-modal-btn">&times;</button>
      <iframe id="modal-iframe" src="" frameborder="0"></iframe>
    </div>
  </div>
</div>
<script src="script.js" defer></script>
</body>
</html>
